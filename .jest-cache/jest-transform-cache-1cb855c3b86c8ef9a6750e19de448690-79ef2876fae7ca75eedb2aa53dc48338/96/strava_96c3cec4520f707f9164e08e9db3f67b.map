{"version":3,"sources":["C:\\Users\\tiama\\Desktop\\Coding\\endurorevamp\\lib\\strava.ts"],"sourcesContent":["export function getStravaAuthUrl(baseUrl?: string) {\r\n  try {\r\n    const url = new URL('https://www.strava.com/oauth/authorize')\r\n    const clientId = process.env.NEXT_PUBLIC_STRAVA_CLIENT_ID\r\n    \r\n    if (!clientId) {\r\n      console.error('NEXT_PUBLIC_STRAVA_CLIENT_ID is not configured')\r\n      return '#'\r\n    }\r\n    \r\n    url.searchParams.set('client_id', clientId)\r\n    \r\n    // Use provided base URL, environment variable, or default\r\n    let redirectUri = process.env.NEXT_PUBLIC_STRAVA_REDIRECT_URI\r\n    if (!redirectUri && baseUrl) {\r\n      redirectUri = `${baseUrl}/dashboard`\r\n    } else if (!redirectUri) {\r\n      // Fallback for development\r\n      redirectUri = 'http://localhost:3000/dashboard'\r\n    }\r\n    \r\n    console.log('ðŸ”— Strava OAuth URL config:', { \r\n      clientId: clientId?.slice(0, 8) + '...', \r\n      redirectUri \r\n    })\r\n    \r\n    url.searchParams.set('redirect_uri', redirectUri)\r\n    url.searchParams.set('response_type', 'code')\r\n    url.searchParams.set('scope', 'read,activity:read_all')\r\n    url.searchParams.set('approval_prompt', 'auto')\r\n    \r\n    return url.toString()\r\n  } catch (error) {\r\n    console.error('Error generating Strava URL:', error)\r\n    return '#' // fallback URL\r\n  }\r\n} "],"names":["getStravaAuthUrl","baseUrl","url","URL","clientId","process","env","NEXT_PUBLIC_STRAVA_CLIENT_ID","console","error","searchParams","set","redirectUri","NEXT_PUBLIC_STRAVA_REDIRECT_URI","log","slice","toString"],"mappings":";;;;+BAAgBA;;;eAAAA;;;AAAT,SAASA,iBAAiBC,OAAgB;IAC/C,IAAI;QACF,MAAMC,MAAM,IAAIC,IAAI;QACpB,MAAMC,WAAWC,QAAQC,GAAG,CAACC,4BAA4B;QAEzD,IAAI,CAACH,UAAU;YACbI,QAAQC,KAAK,CAAC;YACd,OAAO;QACT;QAEAP,IAAIQ,YAAY,CAACC,GAAG,CAAC,aAAaP;QAElC,0DAA0D;QAC1D,IAAIQ,cAAcP,QAAQC,GAAG,CAACO,+BAA+B;QAC7D,IAAI,CAACD,eAAeX,SAAS;YAC3BW,cAAc,GAAGX,QAAQ,UAAU,CAAC;QACtC,OAAO,IAAI,CAACW,aAAa;YACvB,2BAA2B;YAC3BA,cAAc;QAChB;QAEAJ,QAAQM,GAAG,CAAC,+BAA+B;YACzCV,UAAUA,UAAUW,MAAM,GAAG,KAAK;YAClCH;QACF;QAEAV,IAAIQ,YAAY,CAACC,GAAG,CAAC,gBAAgBC;QACrCV,IAAIQ,YAAY,CAACC,GAAG,CAAC,iBAAiB;QACtCT,IAAIQ,YAAY,CAACC,GAAG,CAAC,SAAS;QAC9BT,IAAIQ,YAAY,CAACC,GAAG,CAAC,mBAAmB;QAExC,OAAOT,IAAIc,QAAQ;IACrB,EAAE,OAAOP,OAAO;QACdD,QAAQC,KAAK,CAAC,gCAAgCA;QAC9C,OAAO,IAAI,eAAe;;IAC5B;AACF"}