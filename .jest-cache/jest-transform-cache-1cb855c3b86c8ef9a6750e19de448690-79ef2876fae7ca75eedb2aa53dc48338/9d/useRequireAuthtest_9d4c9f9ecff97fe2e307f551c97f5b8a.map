{"version":3,"sources":["C:\\Users\\tiama\\Desktop\\Coding\\endurorevamp\\__tests__\\hooks\\auth\\useRequireAuth.test.tsx"],"sourcesContent":["import { renderHook } from '@testing-library/react'\r\nimport { useRequireAuth } from '@/hooks/auth/useRequireAuth'\r\n\r\n// Get the mocked functions from global setup\r\nconst { useAuth } = require('@/providers/AuthProvider')\r\nconst { __mockRouterFunctions } = require('next/navigation')\r\n\r\ndescribe('useRequireAuth', () => {\r\n  beforeEach(() => {\r\n    jest.clearAllMocks()\r\n    // Router functions are already mocked globally, no need to override\r\n  })\r\n\r\n  it('should return user data when authenticated', () => {\r\n    const mockUser = {\r\n      id: 'user-123',\r\n      email: 'test@example.com',\r\n      created_at: '2024-01-01T00:00:00Z',\r\n    }\r\n\r\n    ;(useAuth as jest.Mock).mockReturnValue({\r\n      user: mockUser as any,\r\n      isLoading: false,\r\n      isAuthenticated: true,\r\n      signOut: jest.fn(),\r\n      refreshUser: jest.fn(),\r\n    })\r\n\r\n    const { result } = renderHook(() => useRequireAuth())\r\n\r\n    expect(result.current.user).toEqual(mockUser)\r\n    expect(result.current.isLoading).toBe(false)\r\n    expect(result.current.isAuthenticated).toBe(true)\r\n    expect(__mockRouterFunctions.push).not.toHaveBeenCalled()\r\n  })\r\n\r\n  it('should redirect to login when not authenticated and not loading', () => {\r\n    ;(useAuth as jest.Mock).mockReturnValue({\r\n      user: null,\r\n      isLoading: false,\r\n      isAuthenticated: false,\r\n      signOut: jest.fn(),\r\n      refreshUser: jest.fn(),\r\n    })\r\n\r\n    const { result } = renderHook(() => useRequireAuth())\r\n\r\n    expect(result.current.user).toBeNull()\r\n    expect(result.current.isLoading).toBe(false)\r\n    expect(result.current.isAuthenticated).toBe(false)\r\n    expect(__mockRouterFunctions.push).toHaveBeenCalledWith('/auth/login')\r\n  })\r\n\r\n  it('should not redirect when loading', () => {\r\n    ;(useAuth as jest.Mock).mockReturnValue({\r\n      user: null,\r\n      isLoading: true,\r\n      isAuthenticated: false,\r\n      signOut: jest.fn(),\r\n      refreshUser: jest.fn(),\r\n    })\r\n\r\n    const { result } = renderHook(() => useRequireAuth())\r\n\r\n    expect(result.current.user).toBeNull()\r\n    expect(result.current.isLoading).toBe(true)\r\n    expect(result.current.isAuthenticated).toBe(false)\r\n    expect(__mockRouterFunctions.push).not.toHaveBeenCalled()\r\n  })\r\n\r\n  it('should not redirect when user exists', () => {\r\n    const mockUser = {\r\n      id: 'user-123',\r\n      email: 'test@example.com',\r\n      created_at: '2024-01-01T00:00:00Z',\r\n    }\r\n\r\n    ;(useAuth as jest.Mock).mockReturnValue({\r\n      user: mockUser as any,\r\n      isLoading: false,\r\n      isAuthenticated: true,\r\n      signOut: jest.fn(),\r\n      refreshUser: jest.fn(),\r\n    })\r\n\r\n    renderHook(() => useRequireAuth())\r\n\r\n    expect(__mockRouterFunctions.push).not.toHaveBeenCalled()\r\n  })\r\n}) "],"names":["useAuth","require","__mockRouterFunctions","describe","beforeEach","jest","clearAllMocks","it","mockUser","id","email","created_at","mockReturnValue","user","isLoading","isAuthenticated","signOut","fn","refreshUser","result","renderHook","useRequireAuth","expect","current","toEqual","toBe","push","not","toHaveBeenCalled","toBeNull","toHaveBeenCalledWith"],"mappings":";;;;uBAA2B;gCACI;AAE/B,6CAA6C;AAC7C,MAAM,EAAEA,OAAO,EAAE,GAAGC,QAAQ;AAC5B,MAAM,EAAEC,qBAAqB,EAAE,GAAGD,QAAQ;AAE1CE,SAAS,kBAAkB;IACzBC,WAAW;QACTC,KAAKC,aAAa;IAClB,oEAAoE;IACtE;IAEAC,GAAG,8CAA8C;QAC/C,MAAMC,WAAW;YACfC,IAAI;YACJC,OAAO;YACPC,YAAY;QACd;QAEEX,QAAsBY,eAAe,CAAC;YACtCC,MAAML;YACNM,WAAW;YACXC,iBAAiB;YACjBC,SAASX,KAAKY,EAAE;YAChBC,aAAab,KAAKY,EAAE;QACtB;QAEA,MAAM,EAAEE,MAAM,EAAE,GAAGC,IAAAA,iBAAU,EAAC,IAAMC,IAAAA,8BAAc;QAElDC,OAAOH,OAAOI,OAAO,CAACV,IAAI,EAAEW,OAAO,CAAChB;QACpCc,OAAOH,OAAOI,OAAO,CAACT,SAAS,EAAEW,IAAI,CAAC;QACtCH,OAAOH,OAAOI,OAAO,CAACR,eAAe,EAAEU,IAAI,CAAC;QAC5CH,OAAOpB,sBAAsBwB,IAAI,EAAEC,GAAG,CAACC,gBAAgB;IACzD;IAEArB,GAAG,mEAAmE;;QAClEP,QAAsBY,eAAe,CAAC;YACtCC,MAAM;YACNC,WAAW;YACXC,iBAAiB;YACjBC,SAASX,KAAKY,EAAE;YAChBC,aAAab,KAAKY,EAAE;QACtB;QAEA,MAAM,EAAEE,MAAM,EAAE,GAAGC,IAAAA,iBAAU,EAAC,IAAMC,IAAAA,8BAAc;QAElDC,OAAOH,OAAOI,OAAO,CAACV,IAAI,EAAEgB,QAAQ;QACpCP,OAAOH,OAAOI,OAAO,CAACT,SAAS,EAAEW,IAAI,CAAC;QACtCH,OAAOH,OAAOI,OAAO,CAACR,eAAe,EAAEU,IAAI,CAAC;QAC5CH,OAAOpB,sBAAsBwB,IAAI,EAAEI,oBAAoB,CAAC;IAC1D;IAEAvB,GAAG,oCAAoC;;QACnCP,QAAsBY,eAAe,CAAC;YACtCC,MAAM;YACNC,WAAW;YACXC,iBAAiB;YACjBC,SAASX,KAAKY,EAAE;YAChBC,aAAab,KAAKY,EAAE;QACtB;QAEA,MAAM,EAAEE,MAAM,EAAE,GAAGC,IAAAA,iBAAU,EAAC,IAAMC,IAAAA,8BAAc;QAElDC,OAAOH,OAAOI,OAAO,CAACV,IAAI,EAAEgB,QAAQ;QACpCP,OAAOH,OAAOI,OAAO,CAACT,SAAS,EAAEW,IAAI,CAAC;QACtCH,OAAOH,OAAOI,OAAO,CAACR,eAAe,EAAEU,IAAI,CAAC;QAC5CH,OAAOpB,sBAAsBwB,IAAI,EAAEC,GAAG,CAACC,gBAAgB;IACzD;IAEArB,GAAG,wCAAwC;QACzC,MAAMC,WAAW;YACfC,IAAI;YACJC,OAAO;YACPC,YAAY;QACd;QAEEX,QAAsBY,eAAe,CAAC;YACtCC,MAAML;YACNM,WAAW;YACXC,iBAAiB;YACjBC,SAASX,KAAKY,EAAE;YAChBC,aAAab,KAAKY,EAAE;QACtB;QAEAG,IAAAA,iBAAU,EAAC,IAAMC,IAAAA,8BAAc;QAE/BC,OAAOpB,sBAAsBwB,IAAI,EAAEC,GAAG,CAACC,gBAAgB;IACzD;AACF"}