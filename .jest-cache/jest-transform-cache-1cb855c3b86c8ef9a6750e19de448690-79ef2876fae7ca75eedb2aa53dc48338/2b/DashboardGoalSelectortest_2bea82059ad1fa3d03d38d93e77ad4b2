3713744cd5e4b7a962aafd439357b166
"use strict";
// Mock the hooks
jest.mock('@/hooks/useGoals', ()=>({
        useUserGoals: jest.fn(),
        useUpdateGoal: jest.fn(),
        useGoalTypes: jest.fn(),
        useCreateGoal: jest.fn(),
        useDeleteGoal: jest.fn()
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_default(require("react"));
const _react1 = require("@testing-library/react");
const _reactquery = require("@tanstack/react-query");
const _DashboardGoalSelector = require("../../../components/dashboard/DashboardGoalSelector");
const _useGoals = require("../../../hooks/useGoals");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
const mockUseUserGoals = _useGoals.useUserGoals;
const mockUseUpdateGoal = _useGoals.useUpdateGoal;
const mockUseGoalTypes = _useGoals.useGoalTypes;
// Test wrapper component
const TestWrapper = ({ children })=>{
    const queryClient = new _reactquery.QueryClient({
        defaultOptions: {
            queries: {
                retry: false
            },
            mutations: {
                retry: false
            }
        }
    });
    return /*#__PURE__*/ (0, _jsxruntime.jsx)(_reactquery.QueryClientProvider, {
        client: queryClient,
        children: children
    });
};
// Mock goal data
const mockGoals = [
    {
        id: '1',
        user_id: 'user-1',
        goal_type_id: 'weekly-distance',
        target_value: 50,
        target_unit: 'km',
        current_progress: 25,
        is_active: true,
        is_completed: false,
        priority: 1,
        time_period: 'weekly',
        streak_count: 0,
        created_at: '2024-01-01',
        updated_at: '2024-01-01',
        goal_type: {
            id: 'weekly-distance',
            name: 'weekly_distance',
            display_name: 'Weekly Distance',
            description: 'Track your weekly running distance',
            category: 'distance',
            metric_type: 'total_distance',
            unit: 'km',
            calculation_method: 'sum',
            is_active: true,
            created_at: '2024-01-01',
            updated_at: '2024-01-01'
        },
        goal_data: {
            show_on_dashboard: false
        }
    },
    {
        id: '2',
        user_id: 'user-1',
        goal_type_id: 'monthly-runs',
        target_value: 20,
        target_unit: 'runs',
        current_progress: 12,
        is_active: true,
        is_completed: false,
        priority: 2,
        time_period: 'monthly',
        streak_count: 0,
        created_at: '2024-01-01',
        updated_at: '2024-01-01',
        goal_type: {
            id: 'monthly-runs',
            name: 'monthly_runs',
            display_name: 'Monthly Runs',
            description: 'Complete a certain number of runs each month',
            category: 'frequency',
            metric_type: 'run_count',
            unit: 'runs',
            calculation_method: 'count',
            is_active: true,
            created_at: '2024-01-01',
            updated_at: '2024-01-01'
        },
        goal_data: {
            show_on_dashboard: true,
            dashboard_priority: 1
        }
    },
    {
        id: '3',
        user_id: 'user-1',
        goal_type_id: '5k-pace',
        target_value: 300,
        target_unit: 'min/km',
        current_progress: 320,
        is_active: true,
        is_completed: false,
        priority: 3,
        time_period: 'ongoing',
        streak_count: 0,
        created_at: '2024-01-01',
        updated_at: '2024-01-01',
        goal_type: {
            id: '5k-pace',
            name: '5k_pace',
            display_name: '5K Pace',
            description: 'Improve your 5K running pace',
            category: 'pace',
            metric_type: 'average_pace',
            unit: 'min/km',
            calculation_method: 'average',
            is_active: true,
            created_at: '2024-01-01',
            updated_at: '2024-01-01'
        },
        goal_data: {
            show_on_dashboard: false
        }
    }
];
describe('DashboardGoalSelector', ()=>{
    const mockUpdateGoal = jest.fn();
    beforeEach(()=>{
        jest.clearAllMocks();
        mockUseUserGoals.mockReturnValue({
            data: {
                goals: mockGoals,
                onboarding: null
            },
            isLoading: false,
            error: null,
            refetch: jest.fn(),
            isRefetching: false,
            isError: false,
            isSuccess: true
        });
        mockUseUpdateGoal.mockReturnValue({
            mutateAsync: mockUpdateGoal,
            isPending: false,
            isError: false,
            error: null
        });
        mockUseGoalTypes.mockReturnValue({
            data: [],
            isLoading: false,
            error: null,
            refetch: jest.fn(),
            isRefetching: false,
            isError: false,
            isSuccess: true
        });
    });
    it('renders correctly when open', ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(TestWrapper, {
            children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_DashboardGoalSelector.DashboardGoalSelector, {
                open: true,
                onOpenChange: jest.fn()
            })
        }));
        expect(_react1.screen.getByText('Choose Dashboard Goals')).toBeInTheDocument();
        expect(_react1.screen.getByText(/Select up to 3 goals to track as key metrics on your dashboard/)).toBeInTheDocument();
    });
    it('shows loading state', ()=>{
        mockUseUserGoals.mockReturnValue({
            data: null,
            isLoading: true,
            error: null,
            refetch: jest.fn(),
            isRefetching: false,
            isError: false,
            isSuccess: false
        });
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(TestWrapper, {
            children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_DashboardGoalSelector.DashboardGoalSelector, {
                open: true,
                onOpenChange: jest.fn()
            })
        }));
        expect(_react1.screen.getByText('Loading your goals...')).toBeInTheDocument();
    });
    it('displays active goals', ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(TestWrapper, {
            children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_DashboardGoalSelector.DashboardGoalSelector, {
                open: true,
                onOpenChange: jest.fn()
            })
        }));
        expect(_react1.screen.getByText('Weekly Distance')).toBeInTheDocument();
        expect(_react1.screen.getByText('Monthly Runs')).toBeInTheDocument();
        expect(_react1.screen.getByText('5K Pace')).toBeInTheDocument();
    });
    it('shows current dashboard goals as selected', ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(TestWrapper, {
            children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_DashboardGoalSelector.DashboardGoalSelector, {
                open: true,
                onOpenChange: jest.fn()
            })
        }));
        // Monthly Runs should be selected as it has show_on_dashboard: true
        expect(_react1.screen.getByText('#1 on Dashboard')).toBeInTheDocument();
    });
    it('allows selecting goals up to limit of 3', async ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(TestWrapper, {
            children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_DashboardGoalSelector.DashboardGoalSelector, {
                open: true,
                onOpenChange: jest.fn()
            })
        }));
        // Click on Weekly Distance goal
        const weeklyGoal = _react1.screen.getByText('Weekly Distance').closest('.cursor-pointer');
        if (weeklyGoal) {
            _react1.fireEvent.click(weeklyGoal);
        }
        await (0, _react1.waitFor)(()=>{
            expect(_react1.screen.getByText('2/3 goals selected for your dashboard')).toBeInTheDocument();
        });
    });
    it('prevents selecting more than 3 goals', async ()=>{
        // Mock 4 goals with none selected initially
        const extendedMockGoals = [
            ...mockGoals.map((goal)=>({
                    ...goal,
                    goal_data: {
                        show_on_dashboard: false
                    }
                })),
            {
                id: '4',
                user_id: 'user-1',
                goal_type_id: 'elevation',
                target_value: 1000,
                target_unit: 'm',
                current_progress: 500,
                is_active: true,
                is_completed: false,
                priority: 4,
                time_period: 'monthly',
                streak_count: 0,
                created_at: '2024-01-01',
                updated_at: '2024-01-01',
                goal_type: {
                    id: 'elevation',
                    name: 'elevation',
                    display_name: 'Monthly Elevation',
                    description: 'Climb elevation each month',
                    category: 'elevation',
                    metric_type: 'total_elevation',
                    unit: 'm',
                    calculation_method: 'sum',
                    is_active: true,
                    created_at: '2024-01-01',
                    updated_at: '2024-01-01'
                },
                goal_data: {
                    show_on_dashboard: false
                }
            }
        ];
        mockUseUserGoals.mockReturnValue({
            data: {
                goals: extendedMockGoals,
                onboarding: null
            },
            isLoading: false,
            error: null,
            refetch: jest.fn(),
            isRefetching: false,
            isError: false,
            isSuccess: true
        });
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(TestWrapper, {
            children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_DashboardGoalSelector.DashboardGoalSelector, {
                open: true,
                onOpenChange: jest.fn()
            })
        }));
        // Select first three goals  
        const goalCards = _react1.screen.getAllByText(/Weekly Distance|Monthly Runs|5K Pace|Monthly Elevation/).map((text)=>text.closest('.cursor-pointer')).filter(Boolean);
        // Click first 3 goals
        for(let i = 0; i < Math.min(3, goalCards.length); i++){
            const goalCard = goalCards[i];
            if (goalCard) {
                _react1.fireEvent.click(goalCard);
            }
        }
        await (0, _react1.waitFor)(()=>{
            expect(_react1.screen.getByText('3/3 goals selected for your dashboard')).toBeInTheDocument();
        });
        // Fourth goal should be disabled
        const fourthGoal = goalCards[3];
        if (fourthGoal) {
            expect(fourthGoal).toHaveClass('opacity-60', 'cursor-not-allowed');
        }
    });
    it('saves dashboard goals correctly', async ()=>{
        const mockOnOpenChange = jest.fn();
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(TestWrapper, {
            children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_DashboardGoalSelector.DashboardGoalSelector, {
                open: true,
                onOpenChange: mockOnOpenChange
            })
        }));
        // Select a goal
        const weeklyGoal = _react1.screen.getByText('Weekly Distance').closest('.cursor-pointer');
        if (weeklyGoal) {
            _react1.fireEvent.click(weeklyGoal);
        }
        // Click save button
        const saveButton = _react1.screen.getByRole('button', {
            name: /Save Dashboard Goals/
        });
        _react1.fireEvent.click(saveButton);
        await (0, _react1.waitFor)(()=>{
            expect(mockUpdateGoal).toHaveBeenCalled();
            expect(mockOnOpenChange).toHaveBeenCalledWith(false);
        });
    });
    it('shows "Add New Goal" modal when no goals exist', ()=>{
        mockUseUserGoals.mockReturnValue({
            data: {
                goals: [],
                onboarding: null
            },
            isLoading: false,
            error: null,
            refetch: jest.fn(),
            isRefetching: false,
            isError: false,
            isSuccess: true
        });
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(TestWrapper, {
            children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_DashboardGoalSelector.DashboardGoalSelector, {
                open: true,
                onOpenChange: jest.fn()
            })
        }));
        expect(_react1.screen.getByText('No Active Goals')).toBeInTheDocument();
        expect(_react1.screen.getByText('Create Your First Goal')).toBeInTheDocument();
    });
    it('handles errors gracefully', async ()=>{
        mockUpdateGoal.mockRejectedValueOnce(new Error('Failed to update'));
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(TestWrapper, {
            children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_DashboardGoalSelector.DashboardGoalSelector, {
                open: true,
                onOpenChange: jest.fn()
            })
        }));
        // Select a goal and try to save
        const weeklyGoal = _react1.screen.getByText('Weekly Distance').closest('.cursor-pointer');
        if (weeklyGoal) {
            _react1.fireEvent.click(weeklyGoal);
        }
        const saveButton = _react1.screen.getByRole('button', {
            name: /Save Dashboard Goals/
        });
        _react1.fireEvent.click(saveButton);
        await (0, _react1.waitFor)(()=>{
            expect(_react1.screen.getByText('Failed to update')).toBeInTheDocument();
        });
    });
    it('does not render when closed', ()=>{
        (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(TestWrapper, {
            children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_DashboardGoalSelector.DashboardGoalSelector, {
                open: false,
                onOpenChange: jest.fn()
            })
        }));
        expect(_react1.screen.queryByText('Choose Dashboard Goals')).not.toBeInTheDocument();
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcdGlhbWFcXERlc2t0b3BcXENvZGluZ1xcZW5kdXJvcmV2YW1wXFxfX3Rlc3RzX19cXGNvbXBvbmVudHNcXGRhc2hib2FyZFxcRGFzaGJvYXJkR29hbFNlbGVjdG9yLnRlc3QudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IHJlbmRlciwgc2NyZWVuLCBmaXJlRXZlbnQsIHdhaXRGb3IgfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0JztcclxuaW1wb3J0IHsgUXVlcnlDbGllbnQsIFF1ZXJ5Q2xpZW50UHJvdmlkZXIgfSBmcm9tICdAdGFuc3RhY2svcmVhY3QtcXVlcnknO1xyXG5pbXBvcnQgeyBEYXNoYm9hcmRHb2FsU2VsZWN0b3IgfSBmcm9tICdAL2NvbXBvbmVudHMvZGFzaGJvYXJkL0Rhc2hib2FyZEdvYWxTZWxlY3Rvcic7XHJcbmltcG9ydCB7IHVzZVVzZXJHb2FscywgdXNlVXBkYXRlR29hbCwgdXNlR29hbFR5cGVzIH0gZnJvbSAnQC9ob29rcy91c2VHb2Fscyc7XHJcblxyXG4vLyBNb2NrIHRoZSBob29rc1xyXG5qZXN0Lm1vY2soJ0AvaG9va3MvdXNlR29hbHMnLCAoKSA9PiAoe1xyXG4gIHVzZVVzZXJHb2FsczogamVzdC5mbigpLFxyXG4gIHVzZVVwZGF0ZUdvYWw6IGplc3QuZm4oKSxcclxuICB1c2VHb2FsVHlwZXM6IGplc3QuZm4oKSxcclxuICB1c2VDcmVhdGVHb2FsOiBqZXN0LmZuKCksXHJcbiAgdXNlRGVsZXRlR29hbDogamVzdC5mbigpLFxyXG59KSk7XHJcblxyXG5jb25zdCBtb2NrVXNlVXNlckdvYWxzID0gdXNlVXNlckdvYWxzIGFzIGplc3QuTW9ja2VkRnVuY3Rpb248dHlwZW9mIHVzZVVzZXJHb2Fscz47XHJcbmNvbnN0IG1vY2tVc2VVcGRhdGVHb2FsID0gdXNlVXBkYXRlR29hbCBhcyBqZXN0Lk1vY2tlZEZ1bmN0aW9uPHR5cGVvZiB1c2VVcGRhdGVHb2FsPjtcclxuY29uc3QgbW9ja1VzZUdvYWxUeXBlcyA9IHVzZUdvYWxUeXBlcyBhcyBqZXN0Lk1vY2tlZEZ1bmN0aW9uPHR5cGVvZiB1c2VHb2FsVHlwZXM+O1xyXG5cclxuLy8gVGVzdCB3cmFwcGVyIGNvbXBvbmVudFxyXG5jb25zdCBUZXN0V3JhcHBlcjogUmVhY3QuRkM8eyBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlIH0+ID0gKHsgY2hpbGRyZW4gfSkgPT4ge1xyXG4gIGNvbnN0IHF1ZXJ5Q2xpZW50ID0gbmV3IFF1ZXJ5Q2xpZW50KHtcclxuICAgIGRlZmF1bHRPcHRpb25zOiB7XHJcbiAgICAgIHF1ZXJpZXM6IHsgcmV0cnk6IGZhbHNlIH0sXHJcbiAgICAgIG11dGF0aW9uczogeyByZXRyeTogZmFsc2UgfSxcclxuICAgIH0sXHJcbiAgfSk7XHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8UXVlcnlDbGllbnRQcm92aWRlciBjbGllbnQ9e3F1ZXJ5Q2xpZW50fT5cclxuICAgICAge2NoaWxkcmVufVxyXG4gICAgPC9RdWVyeUNsaWVudFByb3ZpZGVyPlxyXG4gICk7XHJcbn07XHJcblxyXG4vLyBNb2NrIGdvYWwgZGF0YVxyXG5jb25zdCBtb2NrR29hbHMgPSBbXHJcbiAge1xyXG4gICAgaWQ6ICcxJyxcclxuICAgIHVzZXJfaWQ6ICd1c2VyLTEnLFxyXG4gICAgZ29hbF90eXBlX2lkOiAnd2Vla2x5LWRpc3RhbmNlJyxcclxuICAgIHRhcmdldF92YWx1ZTogNTAsXHJcbiAgICB0YXJnZXRfdW5pdDogJ2ttJyxcclxuICAgIGN1cnJlbnRfcHJvZ3Jlc3M6IDI1LFxyXG4gICAgaXNfYWN0aXZlOiB0cnVlLFxyXG4gICAgaXNfY29tcGxldGVkOiBmYWxzZSxcclxuICAgIHByaW9yaXR5OiAxLFxyXG4gICAgdGltZV9wZXJpb2Q6ICd3ZWVrbHknIGFzIGNvbnN0LFxyXG4gICAgc3RyZWFrX2NvdW50OiAwLFxyXG4gICAgY3JlYXRlZF9hdDogJzIwMjQtMDEtMDEnLFxyXG4gICAgdXBkYXRlZF9hdDogJzIwMjQtMDEtMDEnLFxyXG4gICAgZ29hbF90eXBlOiB7XHJcbiAgICAgIGlkOiAnd2Vla2x5LWRpc3RhbmNlJyxcclxuICAgICAgbmFtZTogJ3dlZWtseV9kaXN0YW5jZScsXHJcbiAgICAgIGRpc3BsYXlfbmFtZTogJ1dlZWtseSBEaXN0YW5jZScsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiAnVHJhY2sgeW91ciB3ZWVrbHkgcnVubmluZyBkaXN0YW5jZScsXHJcbiAgICAgIGNhdGVnb3J5OiAnZGlzdGFuY2UnIGFzIGNvbnN0LFxyXG4gICAgICBtZXRyaWNfdHlwZTogJ3RvdGFsX2Rpc3RhbmNlJyxcclxuICAgICAgdW5pdDogJ2ttJyxcclxuICAgICAgY2FsY3VsYXRpb25fbWV0aG9kOiAnc3VtJyxcclxuICAgICAgaXNfYWN0aXZlOiB0cnVlLFxyXG4gICAgICBjcmVhdGVkX2F0OiAnMjAyNC0wMS0wMScsXHJcbiAgICAgIHVwZGF0ZWRfYXQ6ICcyMDI0LTAxLTAxJ1xyXG4gICAgfSxcclxuICAgIGdvYWxfZGF0YToge1xyXG4gICAgICBzaG93X29uX2Rhc2hib2FyZDogZmFsc2VcclxuICAgIH1cclxuICB9LFxyXG4gIHtcclxuICAgIGlkOiAnMicsXHJcbiAgICB1c2VyX2lkOiAndXNlci0xJyxcclxuICAgIGdvYWxfdHlwZV9pZDogJ21vbnRobHktcnVucycsXHJcbiAgICB0YXJnZXRfdmFsdWU6IDIwLFxyXG4gICAgdGFyZ2V0X3VuaXQ6ICdydW5zJyxcclxuICAgIGN1cnJlbnRfcHJvZ3Jlc3M6IDEyLFxyXG4gICAgaXNfYWN0aXZlOiB0cnVlLFxyXG4gICAgaXNfY29tcGxldGVkOiBmYWxzZSxcclxuICAgIHByaW9yaXR5OiAyLFxyXG4gICAgdGltZV9wZXJpb2Q6ICdtb250aGx5JyBhcyBjb25zdCxcclxuICAgIHN0cmVha19jb3VudDogMCxcclxuICAgIGNyZWF0ZWRfYXQ6ICcyMDI0LTAxLTAxJyxcclxuICAgIHVwZGF0ZWRfYXQ6ICcyMDI0LTAxLTAxJyxcclxuICAgIGdvYWxfdHlwZToge1xyXG4gICAgICBpZDogJ21vbnRobHktcnVucycsXHJcbiAgICAgIG5hbWU6ICdtb250aGx5X3J1bnMnLFxyXG4gICAgICBkaXNwbGF5X25hbWU6ICdNb250aGx5IFJ1bnMnLFxyXG4gICAgICBkZXNjcmlwdGlvbjogJ0NvbXBsZXRlIGEgY2VydGFpbiBudW1iZXIgb2YgcnVucyBlYWNoIG1vbnRoJyxcclxuICAgICAgY2F0ZWdvcnk6ICdmcmVxdWVuY3knIGFzIGNvbnN0LFxyXG4gICAgICBtZXRyaWNfdHlwZTogJ3J1bl9jb3VudCcsXHJcbiAgICAgIHVuaXQ6ICdydW5zJyxcclxuICAgICAgY2FsY3VsYXRpb25fbWV0aG9kOiAnY291bnQnLFxyXG4gICAgICBpc19hY3RpdmU6IHRydWUsXHJcbiAgICAgIGNyZWF0ZWRfYXQ6ICcyMDI0LTAxLTAxJyxcclxuICAgICAgdXBkYXRlZF9hdDogJzIwMjQtMDEtMDEnXHJcbiAgICB9LFxyXG4gICAgZ29hbF9kYXRhOiB7XHJcbiAgICAgIHNob3dfb25fZGFzaGJvYXJkOiB0cnVlLFxyXG4gICAgICBkYXNoYm9hcmRfcHJpb3JpdHk6IDFcclxuICAgIH1cclxuICB9LFxyXG4gIHtcclxuICAgIGlkOiAnMycsXHJcbiAgICB1c2VyX2lkOiAndXNlci0xJyxcclxuICAgIGdvYWxfdHlwZV9pZDogJzVrLXBhY2UnLFxyXG4gICAgdGFyZ2V0X3ZhbHVlOiAzMDAsIC8vIDU6MDAgbWluL2ttIGluIHNlY29uZHNcclxuICAgIHRhcmdldF91bml0OiAnbWluL2ttJyxcclxuICAgIGN1cnJlbnRfcHJvZ3Jlc3M6IDMyMCxcclxuICAgIGlzX2FjdGl2ZTogdHJ1ZSxcclxuICAgIGlzX2NvbXBsZXRlZDogZmFsc2UsXHJcbiAgICBwcmlvcml0eTogMyxcclxuICAgIHRpbWVfcGVyaW9kOiAnb25nb2luZycgYXMgY29uc3QsXHJcbiAgICBzdHJlYWtfY291bnQ6IDAsXHJcbiAgICBjcmVhdGVkX2F0OiAnMjAyNC0wMS0wMScsXHJcbiAgICB1cGRhdGVkX2F0OiAnMjAyNC0wMS0wMScsXHJcbiAgICBnb2FsX3R5cGU6IHtcclxuICAgICAgaWQ6ICc1ay1wYWNlJyxcclxuICAgICAgbmFtZTogJzVrX3BhY2UnLFxyXG4gICAgICBkaXNwbGF5X25hbWU6ICc1SyBQYWNlJyxcclxuICAgICAgZGVzY3JpcHRpb246ICdJbXByb3ZlIHlvdXIgNUsgcnVubmluZyBwYWNlJyxcclxuICAgICAgY2F0ZWdvcnk6ICdwYWNlJyBhcyBjb25zdCxcclxuICAgICAgbWV0cmljX3R5cGU6ICdhdmVyYWdlX3BhY2UnLFxyXG4gICAgICB1bml0OiAnbWluL2ttJyxcclxuICAgICAgY2FsY3VsYXRpb25fbWV0aG9kOiAnYXZlcmFnZScsXHJcbiAgICAgIGlzX2FjdGl2ZTogdHJ1ZSxcclxuICAgICAgY3JlYXRlZF9hdDogJzIwMjQtMDEtMDEnLFxyXG4gICAgICB1cGRhdGVkX2F0OiAnMjAyNC0wMS0wMSdcclxuICAgIH0sXHJcbiAgICBnb2FsX2RhdGE6IHtcclxuICAgICAgc2hvd19vbl9kYXNoYm9hcmQ6IGZhbHNlXHJcbiAgICB9XHJcbiAgfVxyXG5dO1xyXG5cclxuZGVzY3JpYmUoJ0Rhc2hib2FyZEdvYWxTZWxlY3RvcicsICgpID0+IHtcclxuICBjb25zdCBtb2NrVXBkYXRlR29hbCA9IGplc3QuZm4oKTtcclxuXHJcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcclxuICAgIFxyXG4gICAgbW9ja1VzZVVzZXJHb2Fscy5tb2NrUmV0dXJuVmFsdWUoe1xyXG4gICAgICBkYXRhOiB7IGdvYWxzOiBtb2NrR29hbHMsIG9uYm9hcmRpbmc6IG51bGwgfSxcclxuICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcclxuICAgICAgZXJyb3I6IG51bGwsXHJcbiAgICAgIHJlZmV0Y2g6IGplc3QuZm4oKSxcclxuICAgICAgaXNSZWZldGNoaW5nOiBmYWxzZSxcclxuICAgICAgaXNFcnJvcjogZmFsc2UsXHJcbiAgICAgIGlzU3VjY2VzczogdHJ1ZVxyXG4gICAgfSBhcyBhbnkpO1xyXG5cclxuICAgIG1vY2tVc2VVcGRhdGVHb2FsLm1vY2tSZXR1cm5WYWx1ZSh7XHJcbiAgICAgIG11dGF0ZUFzeW5jOiBtb2NrVXBkYXRlR29hbCxcclxuICAgICAgaXNQZW5kaW5nOiBmYWxzZSxcclxuICAgICAgaXNFcnJvcjogZmFsc2UsXHJcbiAgICAgIGVycm9yOiBudWxsXHJcbiAgICB9IGFzIGFueSk7XHJcblxyXG4gICAgbW9ja1VzZUdvYWxUeXBlcy5tb2NrUmV0dXJuVmFsdWUoe1xyXG4gICAgICBkYXRhOiBbXSxcclxuICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcclxuICAgICAgZXJyb3I6IG51bGwsXHJcbiAgICAgIHJlZmV0Y2g6IGplc3QuZm4oKSxcclxuICAgICAgaXNSZWZldGNoaW5nOiBmYWxzZSxcclxuICAgICAgaXNFcnJvcjogZmFsc2UsXHJcbiAgICAgIGlzU3VjY2VzczogdHJ1ZVxyXG4gICAgfSBhcyBhbnkpO1xyXG4gIH0pO1xyXG5cclxuICBpdCgncmVuZGVycyBjb3JyZWN0bHkgd2hlbiBvcGVuJywgKCkgPT4ge1xyXG4gICAgcmVuZGVyKFxyXG4gICAgICA8VGVzdFdyYXBwZXI+XHJcbiAgICAgICAgPERhc2hib2FyZEdvYWxTZWxlY3RvciBvcGVuPXt0cnVlfSBvbk9wZW5DaGFuZ2U9e2plc3QuZm4oKX0gLz5cclxuICAgICAgPC9UZXN0V3JhcHBlcj5cclxuICAgICk7XHJcblxyXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0Nob29zZSBEYXNoYm9hcmQgR29hbHMnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcclxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KC9TZWxlY3QgdXAgdG8gMyBnb2FscyB0byB0cmFjayBhcyBrZXkgbWV0cmljcyBvbiB5b3VyIGRhc2hib2FyZC8pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xyXG4gIH0pO1xyXG5cclxuICBpdCgnc2hvd3MgbG9hZGluZyBzdGF0ZScsICgpID0+IHtcclxuICAgIG1vY2tVc2VVc2VyR29hbHMubW9ja1JldHVyblZhbHVlKHtcclxuICAgICAgZGF0YTogbnVsbCxcclxuICAgICAgaXNMb2FkaW5nOiB0cnVlLFxyXG4gICAgICBlcnJvcjogbnVsbCxcclxuICAgICAgcmVmZXRjaDogamVzdC5mbigpLFxyXG4gICAgICBpc1JlZmV0Y2hpbmc6IGZhbHNlLFxyXG4gICAgICBpc0Vycm9yOiBmYWxzZSxcclxuICAgICAgaXNTdWNjZXNzOiBmYWxzZVxyXG4gICAgfSBhcyBhbnkpO1xyXG5cclxuICAgIHJlbmRlcihcclxuICAgICAgPFRlc3RXcmFwcGVyPlxyXG4gICAgICAgIDxEYXNoYm9hcmRHb2FsU2VsZWN0b3Igb3Blbj17dHJ1ZX0gb25PcGVuQ2hhbmdlPXtqZXN0LmZuKCl9IC8+XHJcbiAgICAgIDwvVGVzdFdyYXBwZXI+XHJcbiAgICApO1xyXG5cclxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdMb2FkaW5nIHlvdXIgZ29hbHMuLi4nKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ2Rpc3BsYXlzIGFjdGl2ZSBnb2FscycsICgpID0+IHtcclxuICAgIHJlbmRlcihcclxuICAgICAgPFRlc3RXcmFwcGVyPlxyXG4gICAgICAgIDxEYXNoYm9hcmRHb2FsU2VsZWN0b3Igb3Blbj17dHJ1ZX0gb25PcGVuQ2hhbmdlPXtqZXN0LmZuKCl9IC8+XHJcbiAgICAgIDwvVGVzdFdyYXBwZXI+XHJcbiAgICApO1xyXG5cclxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdXZWVrbHkgRGlzdGFuY2UnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcclxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdNb250aGx5IFJ1bnMnKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcclxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCc1SyBQYWNlJykpLnRvQmVJblRoZURvY3VtZW50KCk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KCdzaG93cyBjdXJyZW50IGRhc2hib2FyZCBnb2FscyBhcyBzZWxlY3RlZCcsICgpID0+IHtcclxuICAgIHJlbmRlcihcclxuICAgICAgPFRlc3RXcmFwcGVyPlxyXG4gICAgICAgIDxEYXNoYm9hcmRHb2FsU2VsZWN0b3Igb3Blbj17dHJ1ZX0gb25PcGVuQ2hhbmdlPXtqZXN0LmZuKCl9IC8+XHJcbiAgICAgIDwvVGVzdFdyYXBwZXI+XHJcbiAgICApO1xyXG5cclxuICAgIC8vIE1vbnRobHkgUnVucyBzaG91bGQgYmUgc2VsZWN0ZWQgYXMgaXQgaGFzIHNob3dfb25fZGFzaGJvYXJkOiB0cnVlXHJcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnIzEgb24gRGFzaGJvYXJkJykpLnRvQmVJblRoZURvY3VtZW50KCk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KCdhbGxvd3Mgc2VsZWN0aW5nIGdvYWxzIHVwIHRvIGxpbWl0IG9mIDMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICByZW5kZXIoXHJcbiAgICAgIDxUZXN0V3JhcHBlcj5cclxuICAgICAgICA8RGFzaGJvYXJkR29hbFNlbGVjdG9yIG9wZW49e3RydWV9IG9uT3BlbkNoYW5nZT17amVzdC5mbigpfSAvPlxyXG4gICAgICA8L1Rlc3RXcmFwcGVyPlxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBDbGljayBvbiBXZWVrbHkgRGlzdGFuY2UgZ29hbFxyXG4gICAgY29uc3Qgd2Vla2x5R29hbCA9IHNjcmVlbi5nZXRCeVRleHQoJ1dlZWtseSBEaXN0YW5jZScpLmNsb3Nlc3QoJy5jdXJzb3ItcG9pbnRlcicpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgXHJcbiAgICBpZiAod2Vla2x5R29hbCkge1xyXG4gICAgICBmaXJlRXZlbnQuY2xpY2sod2Vla2x5R29hbCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XHJcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCcyLzMgZ29hbHMgc2VsZWN0ZWQgZm9yIHlvdXIgZGFzaGJvYXJkJykpLnRvQmVJblRoZURvY3VtZW50KCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ3ByZXZlbnRzIHNlbGVjdGluZyBtb3JlIHRoYW4gMyBnb2FscycsIGFzeW5jICgpID0+IHtcclxuICAgIC8vIE1vY2sgNCBnb2FscyB3aXRoIG5vbmUgc2VsZWN0ZWQgaW5pdGlhbGx5XHJcbiAgICBjb25zdCBleHRlbmRlZE1vY2tHb2FscyA9IFtcclxuICAgICAgLi4ubW9ja0dvYWxzLm1hcChnb2FsID0+ICh7XHJcbiAgICAgICAgLi4uZ29hbCxcclxuICAgICAgICBnb2FsX2RhdGE6IHsgc2hvd19vbl9kYXNoYm9hcmQ6IGZhbHNlIH1cclxuICAgICAgfSkpLFxyXG4gICAgICB7XHJcbiAgICAgICAgaWQ6ICc0JyxcclxuICAgICAgICB1c2VyX2lkOiAndXNlci0xJyxcclxuICAgICAgICBnb2FsX3R5cGVfaWQ6ICdlbGV2YXRpb24nLFxyXG4gICAgICAgIHRhcmdldF92YWx1ZTogMTAwMCxcclxuICAgICAgICB0YXJnZXRfdW5pdDogJ20nLFxyXG4gICAgICAgIGN1cnJlbnRfcHJvZ3Jlc3M6IDUwMCxcclxuICAgICAgICBpc19hY3RpdmU6IHRydWUsXHJcbiAgICAgICAgaXNfY29tcGxldGVkOiBmYWxzZSxcclxuICAgICAgICBwcmlvcml0eTogNCxcclxuICAgICAgICB0aW1lX3BlcmlvZDogJ21vbnRobHknIGFzIGNvbnN0LFxyXG4gICAgICAgIHN0cmVha19jb3VudDogMCxcclxuICAgICAgICBjcmVhdGVkX2F0OiAnMjAyNC0wMS0wMScsXHJcbiAgICAgICAgdXBkYXRlZF9hdDogJzIwMjQtMDEtMDEnLFxyXG4gICAgICAgIGdvYWxfdHlwZToge1xyXG4gICAgICAgICAgaWQ6ICdlbGV2YXRpb24nLFxyXG4gICAgICAgICAgbmFtZTogJ2VsZXZhdGlvbicsXHJcbiAgICAgICAgICBkaXNwbGF5X25hbWU6ICdNb250aGx5IEVsZXZhdGlvbicsXHJcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ0NsaW1iIGVsZXZhdGlvbiBlYWNoIG1vbnRoJyxcclxuICAgICAgICAgIGNhdGVnb3J5OiAnZWxldmF0aW9uJyBhcyBjb25zdCxcclxuICAgICAgICAgIG1ldHJpY190eXBlOiAndG90YWxfZWxldmF0aW9uJyxcclxuICAgICAgICAgIHVuaXQ6ICdtJyxcclxuICAgICAgICAgIGNhbGN1bGF0aW9uX21ldGhvZDogJ3N1bScsXHJcbiAgICAgICAgICBpc19hY3RpdmU6IHRydWUsXHJcbiAgICAgICAgICBjcmVhdGVkX2F0OiAnMjAyNC0wMS0wMScsXHJcbiAgICAgICAgICB1cGRhdGVkX2F0OiAnMjAyNC0wMS0wMSdcclxuICAgICAgICB9LFxyXG4gICAgICAgIGdvYWxfZGF0YToge1xyXG4gICAgICAgICAgc2hvd19vbl9kYXNoYm9hcmQ6IGZhbHNlXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICBdO1xyXG5cclxuICAgIG1vY2tVc2VVc2VyR29hbHMubW9ja1JldHVyblZhbHVlKHtcclxuICAgICAgZGF0YTogeyBnb2FsczogZXh0ZW5kZWRNb2NrR29hbHMsIG9uYm9hcmRpbmc6IG51bGwgfSxcclxuICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcclxuICAgICAgZXJyb3I6IG51bGwsXHJcbiAgICAgIHJlZmV0Y2g6IGplc3QuZm4oKSxcclxuICAgICAgaXNSZWZldGNoaW5nOiBmYWxzZSxcclxuICAgICAgaXNFcnJvcjogZmFsc2UsXHJcbiAgICAgIGlzU3VjY2VzczogdHJ1ZVxyXG4gICAgfSBhcyBhbnkpO1xyXG5cclxuICAgIHJlbmRlcihcclxuICAgICAgPFRlc3RXcmFwcGVyPlxyXG4gICAgICAgIDxEYXNoYm9hcmRHb2FsU2VsZWN0b3Igb3Blbj17dHJ1ZX0gb25PcGVuQ2hhbmdlPXtqZXN0LmZuKCl9IC8+XHJcbiAgICAgIDwvVGVzdFdyYXBwZXI+XHJcbiAgICApO1xyXG5cclxuICAgIC8vIFNlbGVjdCBmaXJzdCB0aHJlZSBnb2FscyAgXHJcbiAgICBjb25zdCBnb2FsQ2FyZHMgPSBzY3JlZW4uZ2V0QWxsQnlUZXh0KC9XZWVrbHkgRGlzdGFuY2V8TW9udGhseSBSdW5zfDVLIFBhY2V8TW9udGhseSBFbGV2YXRpb24vKVxyXG4gICAgICAubWFwKHRleHQgPT4gdGV4dC5jbG9zZXN0KCcuY3Vyc29yLXBvaW50ZXInKSlcclxuICAgICAgLmZpbHRlcihCb29sZWFuKSBhcyBIVE1MRWxlbWVudFtdO1xyXG5cclxuICAgIC8vIENsaWNrIGZpcnN0IDMgZ29hbHNcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgTWF0aC5taW4oMywgZ29hbENhcmRzLmxlbmd0aCk7IGkrKykge1xyXG4gICAgICBjb25zdCBnb2FsQ2FyZCA9IGdvYWxDYXJkc1tpXTtcclxuICAgICAgaWYgKGdvYWxDYXJkKSB7XHJcbiAgICAgICAgZmlyZUV2ZW50LmNsaWNrKGdvYWxDYXJkKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xyXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnMy8zIGdvYWxzIHNlbGVjdGVkIGZvciB5b3VyIGRhc2hib2FyZCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gRm91cnRoIGdvYWwgc2hvdWxkIGJlIGRpc2FibGVkXHJcbiAgICBjb25zdCBmb3VydGhHb2FsID0gZ29hbENhcmRzWzNdO1xyXG4gICAgaWYgKGZvdXJ0aEdvYWwpIHtcclxuICAgICAgZXhwZWN0KGZvdXJ0aEdvYWwpLnRvSGF2ZUNsYXNzKCdvcGFjaXR5LTYwJywgJ2N1cnNvci1ub3QtYWxsb3dlZCcpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICBpdCgnc2F2ZXMgZGFzaGJvYXJkIGdvYWxzIGNvcnJlY3RseScsIGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IG1vY2tPbk9wZW5DaGFuZ2UgPSBqZXN0LmZuKCk7XHJcbiAgICBcclxuICAgIHJlbmRlcihcclxuICAgICAgPFRlc3RXcmFwcGVyPlxyXG4gICAgICAgIDxEYXNoYm9hcmRHb2FsU2VsZWN0b3Igb3Blbj17dHJ1ZX0gb25PcGVuQ2hhbmdlPXttb2NrT25PcGVuQ2hhbmdlfSAvPlxyXG4gICAgICA8L1Rlc3RXcmFwcGVyPlxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBTZWxlY3QgYSBnb2FsXHJcbiAgICBjb25zdCB3ZWVrbHlHb2FsID0gc2NyZWVuLmdldEJ5VGV4dCgnV2Vla2x5IERpc3RhbmNlJykuY2xvc2VzdCgnLmN1cnNvci1wb2ludGVyJykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICBpZiAod2Vla2x5R29hbCkge1xyXG4gICAgICBmaXJlRXZlbnQuY2xpY2sod2Vla2x5R29hbCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2xpY2sgc2F2ZSBidXR0b25cclxuICAgIGNvbnN0IHNhdmVCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC9TYXZlIERhc2hib2FyZCBHb2Fscy8gfSk7XHJcbiAgICBmaXJlRXZlbnQuY2xpY2soc2F2ZUJ1dHRvbik7XHJcblxyXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XHJcbiAgICAgIGV4cGVjdChtb2NrVXBkYXRlR29hbCkudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgICBleHBlY3QobW9ja09uT3BlbkNoYW5nZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoZmFsc2UpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KCdzaG93cyBcIkFkZCBOZXcgR29hbFwiIG1vZGFsIHdoZW4gbm8gZ29hbHMgZXhpc3QnLCAoKSA9PiB7XHJcbiAgICBtb2NrVXNlVXNlckdvYWxzLm1vY2tSZXR1cm5WYWx1ZSh7XHJcbiAgICAgIGRhdGE6IHsgZ29hbHM6IFtdLCBvbmJvYXJkaW5nOiBudWxsIH0sXHJcbiAgICAgIGlzTG9hZGluZzogZmFsc2UsXHJcbiAgICAgIGVycm9yOiBudWxsLFxyXG4gICAgICByZWZldGNoOiBqZXN0LmZuKCksXHJcbiAgICAgIGlzUmVmZXRjaGluZzogZmFsc2UsXHJcbiAgICAgIGlzRXJyb3I6IGZhbHNlLFxyXG4gICAgICBpc1N1Y2Nlc3M6IHRydWVcclxuICAgIH0gYXMgYW55KTtcclxuXHJcbiAgICByZW5kZXIoXHJcbiAgICAgIDxUZXN0V3JhcHBlcj5cclxuICAgICAgICA8RGFzaGJvYXJkR29hbFNlbGVjdG9yIG9wZW49e3RydWV9IG9uT3BlbkNoYW5nZT17amVzdC5mbigpfSAvPlxyXG4gICAgICA8L1Rlc3RXcmFwcGVyPlxyXG4gICAgKTtcclxuXHJcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnTm8gQWN0aXZlIEdvYWxzJykpLnRvQmVJblRoZURvY3VtZW50KCk7XHJcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnQ3JlYXRlIFlvdXIgRmlyc3QgR29hbCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xyXG4gIH0pO1xyXG5cclxuICBpdCgnaGFuZGxlcyBlcnJvcnMgZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcclxuICAgIG1vY2tVcGRhdGVHb2FsLm1vY2tSZWplY3RlZFZhbHVlT25jZShuZXcgRXJyb3IoJ0ZhaWxlZCB0byB1cGRhdGUnKSk7XHJcblxyXG4gICAgcmVuZGVyKFxyXG4gICAgICA8VGVzdFdyYXBwZXI+XHJcbiAgICAgICAgPERhc2hib2FyZEdvYWxTZWxlY3RvciBvcGVuPXt0cnVlfSBvbk9wZW5DaGFuZ2U9e2plc3QuZm4oKX0gLz5cclxuICAgICAgPC9UZXN0V3JhcHBlcj5cclxuICAgICk7XHJcblxyXG4gICAgLy8gU2VsZWN0IGEgZ29hbCBhbmQgdHJ5IHRvIHNhdmVcclxuICAgIGNvbnN0IHdlZWtseUdvYWwgPSBzY3JlZW4uZ2V0QnlUZXh0KCdXZWVrbHkgRGlzdGFuY2UnKS5jbG9zZXN0KCcuY3Vyc29yLXBvaW50ZXInKTtcclxuICAgIGlmICh3ZWVrbHlHb2FsKSB7XHJcbiAgICAgIGZpcmVFdmVudC5jbGljayh3ZWVrbHlHb2FsKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBzYXZlQnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvU2F2ZSBEYXNoYm9hcmQgR29hbHMvIH0pO1xyXG4gICAgZmlyZUV2ZW50LmNsaWNrKHNhdmVCdXR0b24pO1xyXG5cclxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xyXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnRmFpbGVkIHRvIHVwZGF0ZScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KCdkb2VzIG5vdCByZW5kZXIgd2hlbiBjbG9zZWQnLCAoKSA9PiB7XHJcbiAgICByZW5kZXIoXHJcbiAgICAgIDxUZXN0V3JhcHBlcj5cclxuICAgICAgICA8RGFzaGJvYXJkR29hbFNlbGVjdG9yIG9wZW49e2ZhbHNlfSBvbk9wZW5DaGFuZ2U9e2plc3QuZm4oKX0gLz5cclxuICAgICAgPC9UZXN0V3JhcHBlcj5cclxuICAgICk7XHJcblxyXG4gICAgZXhwZWN0KHNjcmVlbi5xdWVyeUJ5VGV4dCgnQ2hvb3NlIERhc2hib2FyZCBHb2FscycpKS5ub3QudG9CZUluVGhlRG9jdW1lbnQoKTtcclxuICB9KTtcclxufSk7ICJdLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsInVzZVVzZXJHb2FscyIsImZuIiwidXNlVXBkYXRlR29hbCIsInVzZUdvYWxUeXBlcyIsInVzZUNyZWF0ZUdvYWwiLCJ1c2VEZWxldGVHb2FsIiwibW9ja1VzZVVzZXJHb2FscyIsIm1vY2tVc2VVcGRhdGVHb2FsIiwibW9ja1VzZUdvYWxUeXBlcyIsIlRlc3RXcmFwcGVyIiwiY2hpbGRyZW4iLCJxdWVyeUNsaWVudCIsIlF1ZXJ5Q2xpZW50IiwiZGVmYXVsdE9wdGlvbnMiLCJxdWVyaWVzIiwicmV0cnkiLCJtdXRhdGlvbnMiLCJRdWVyeUNsaWVudFByb3ZpZGVyIiwiY2xpZW50IiwibW9ja0dvYWxzIiwiaWQiLCJ1c2VyX2lkIiwiZ29hbF90eXBlX2lkIiwidGFyZ2V0X3ZhbHVlIiwidGFyZ2V0X3VuaXQiLCJjdXJyZW50X3Byb2dyZXNzIiwiaXNfYWN0aXZlIiwiaXNfY29tcGxldGVkIiwicHJpb3JpdHkiLCJ0aW1lX3BlcmlvZCIsInN0cmVha19jb3VudCIsImNyZWF0ZWRfYXQiLCJ1cGRhdGVkX2F0IiwiZ29hbF90eXBlIiwibmFtZSIsImRpc3BsYXlfbmFtZSIsImRlc2NyaXB0aW9uIiwiY2F0ZWdvcnkiLCJtZXRyaWNfdHlwZSIsInVuaXQiLCJjYWxjdWxhdGlvbl9tZXRob2QiLCJnb2FsX2RhdGEiLCJzaG93X29uX2Rhc2hib2FyZCIsImRhc2hib2FyZF9wcmlvcml0eSIsImRlc2NyaWJlIiwibW9ja1VwZGF0ZUdvYWwiLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsIm1vY2tSZXR1cm5WYWx1ZSIsImRhdGEiLCJnb2FscyIsIm9uYm9hcmRpbmciLCJpc0xvYWRpbmciLCJlcnJvciIsInJlZmV0Y2giLCJpc1JlZmV0Y2hpbmciLCJpc0Vycm9yIiwiaXNTdWNjZXNzIiwibXV0YXRlQXN5bmMiLCJpc1BlbmRpbmciLCJpdCIsInJlbmRlciIsIkRhc2hib2FyZEdvYWxTZWxlY3RvciIsIm9wZW4iLCJvbk9wZW5DaGFuZ2UiLCJleHBlY3QiLCJzY3JlZW4iLCJnZXRCeVRleHQiLCJ0b0JlSW5UaGVEb2N1bWVudCIsIndlZWtseUdvYWwiLCJjbG9zZXN0IiwiZmlyZUV2ZW50IiwiY2xpY2siLCJ3YWl0Rm9yIiwiZXh0ZW5kZWRNb2NrR29hbHMiLCJtYXAiLCJnb2FsIiwiZ29hbENhcmRzIiwiZ2V0QWxsQnlUZXh0IiwidGV4dCIsImZpbHRlciIsIkJvb2xlYW4iLCJpIiwiTWF0aCIsIm1pbiIsImxlbmd0aCIsImdvYWxDYXJkIiwiZm91cnRoR29hbCIsInRvSGF2ZUNsYXNzIiwibW9ja09uT3BlbkNoYW5nZSIsInNhdmVCdXR0b24iLCJnZXRCeVJvbGUiLCJ0b0hhdmVCZWVuQ2FsbGVkIiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJtb2Nr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