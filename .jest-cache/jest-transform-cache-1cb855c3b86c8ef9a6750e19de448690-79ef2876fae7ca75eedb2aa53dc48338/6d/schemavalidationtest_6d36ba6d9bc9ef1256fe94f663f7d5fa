dfcd8fbcc83c4751ec082e0731f75c24
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    createTestGoalData: function() {
        return createTestGoalData;
    },
    runSchemaHealthCheck: function() {
        return runSchemaHealthCheck;
    }
});
const _supabasejs = require("@supabase/supabase-js");
// Schema validation tests to ensure relationships work correctly
describe('Database Schema Validation', ()=>{
    let supabase = null;
    beforeAll(()=>{
        // Check if we have real environment variables
        if (!process.env.NEXT_PUBLIC_SUPABASE_URL || !process.env.SUPABASE_SERVICE_ROLE_KEY || process.env.NEXT_PUBLIC_SUPABASE_URL.includes('test.supabase.co')) {
            console.log('⚠️  Skipping schema validation - no real database credentials');
            return;
        }
        supabase = (0, _supabasejs.createClient)(process.env.NEXT_PUBLIC_SUPABASE_URL, process.env.SUPABASE_SERVICE_ROLE_KEY);
    });
    describe('Core Table Existence', ()=>{
        const requiredTables = [
            'activities',
            'strava_tokens',
            'sync_state',
            'goal_types',
            'user_goals',
            'goal_progress',
            'user_onboarding'
        ];
        requiredTables.forEach((table)=>{
            it(`should have ${table} table`, async ()=>{
                if (!supabase) {
                    console.log('Skipping test - no database connection');
                    return;
                }
                const { data, error } = await supabase.from(table).select('*').limit(1);
                expect(error).toBeNull();
            });
        });
    });
    describe('Foreign Key Relationships', ()=>{
        it('user_goals should reference goal_types correctly', async ()=>{
            if (!supabase) {
                console.log('Skipping test - no database connection');
                return;
            }
            // Get a goal type
            const { data: goalTypes } = await supabase.from('goal_types').select('id, name').limit(1);
            if (goalTypes && goalTypes.length > 0) {
                // Check if any user_goals reference this goal_type
                const { data: userGoals, error } = await supabase.from('user_goals').select(`
            id,
            goal_type_id,
            goal_types (
              id,
              name,
              display_name
            )
          `).eq('goal_type_id', goalTypes[0].id).limit(1);
                expect(error).toBeNull();
                if (userGoals && userGoals.length > 0) {
                    expect(userGoals[0].goal_types).toBeTruthy();
                    expect(userGoals[0].goal_types.id).toBe(goalTypes[0].id);
                }
            }
        });
        it('goal_progress should reference user_goals correctly', async ()=>{
            if (!supabase) {
                console.log('Skipping test - no database connection');
                return;
            }
            const { data: userGoals } = await supabase.from('user_goals').select('id').limit(1);
            if (userGoals && userGoals.length > 0) {
                const { data: progress, error } = await supabase.from('goal_progress').select(`
            id,
            user_goal_id,
            user_goals (
              id,
              goal_type_id
            )
          `).eq('user_goal_id', userGoals[0].id).limit(1);
                expect(error).toBeNull();
                if (progress && progress.length > 0) {
                    expect(progress[0].user_goals).toBeTruthy();
                    expect(progress[0].user_goals.id).toBe(userGoals[0].id);
                }
            }
        });
        it('user_onboarding should have unique user_id constraint', async ()=>{
            if (!supabase) {
                console.log('Skipping test - no database connection');
                return;
            }
            const { data: onboarding, error } = await supabase.from('user_onboarding').select('user_id');
            expect(error).toBeNull();
            if (onboarding && onboarding.length > 0) {
                const userIds = onboarding.map((o)=>o.user_id);
                const uniqueUserIds = [
                    ...new Set(userIds)
                ];
                // Should have same length if all user_ids are unique
                expect(userIds.length).toBe(uniqueUserIds.length);
            }
        });
    });
    describe('Data Integrity Checks', ()=>{
        it('goal_types should have valid categories', async ()=>{
            if (!supabase) {
                console.log('Skipping test - no database connection');
                return;
            }
            const validCategories = [
                'distance',
                'pace',
                'frequency',
                'duration',
                'elevation',
                'heart_rate',
                'event'
            ];
            const { data: goalTypes, error } = await supabase.from('goal_types').select('category');
            expect(error).toBeNull();
            if (goalTypes) {
                goalTypes.forEach((goalType)=>{
                    expect(validCategories).toContain(goalType.category);
                });
            }
        });
        it('user_goals should have valid time_periods', async ()=>{
            if (!supabase) {
                console.log('Skipping test - no database connection');
                return;
            }
            const validTimePeriods = [
                'weekly',
                'monthly',
                'single_activity',
                'ongoing'
            ];
            const { data: userGoals, error } = await supabase.from('user_goals').select('time_period');
            expect(error).toBeNull();
            if (userGoals) {
                userGoals.forEach((goal)=>{
                    expect(validTimePeriods).toContain(goal.time_period);
                });
            }
        });
        it('activities should have user_id that matches UUID format', async ()=>{
            if (!supabase) {
                console.log('Skipping test - no database connection');
                return;
            }
            const { data: activities, error } = await supabase.from('activities').select('user_id').limit(5);
            expect(error).toBeNull();
            if (activities) {
                const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;
                activities.forEach((activity)=>{
                    expect(activity.user_id).toMatch(uuidRegex);
                });
            }
        });
    });
    describe('Dashboard Goals Feature Readiness', ()=>{
        it('goal_data should support dashboard preferences', async ()=>{
            if (!supabase) {
                console.log('Skipping test - no database connection');
                return;
            }
            const { data: userGoals, error } = await supabase.from('user_goals').select('goal_data').not('goal_data', 'is', null).limit(1);
            expect(error).toBeNull();
            if (userGoals && userGoals.length > 0) {
                const goalData = userGoals[0].goal_data;
                // Should be valid JSON and support our dashboard fields
                expect(typeof goalData).toBe('object');
                // These fields might not exist yet, but the structure should support them
                if (goalData.show_on_dashboard !== undefined) {
                    expect(typeof goalData.show_on_dashboard).toBe('boolean');
                }
                if (goalData.dashboard_priority !== undefined) {
                    expect(typeof goalData.dashboard_priority).toBe('number');
                    expect(goalData.dashboard_priority).toBeGreaterThan(0);
                    expect(goalData.dashboard_priority).toBeLessThanOrEqual(3);
                }
            }
        });
        it('user_onboarding should track goals completion', async ()=>{
            if (!supabase) {
                console.log('Skipping test - no database connection');
                return;
            }
            const { data: onboarding, error } = await supabase.from('user_onboarding').select('goals_completed, current_step');
            expect(error).toBeNull();
            if (onboarding && onboarding.length > 0) {
                onboarding.forEach((record)=>{
                    // goals_completed should be boolean
                    expect(typeof record.goals_completed).toBe('boolean');
                    // current_step should be valid value
                    expect([
                        'goals',
                        'strava',
                        'complete'
                    ]).toContain(record.current_step);
                });
            }
        });
        it('complete user goal flow should be queryable', async ()=>{
            // Test the complete chain: user → user_goals → goal_types → goal_progress
            if (!supabase) {
                console.log('Skipping test - no database connection');
                return;
            }
            const { data, error } = await supabase.from('user_goals').select(`
          id,
          target_value,
          current_progress,
          is_completed,
          goal_types (
            display_name,
            category,
            unit
          ),
          goal_progress (
            id,
            value_achieved,
            contribution_amount
          )
        `).limit(1);
            expect(error).toBeNull();
            if (data && data.length > 0) {
                const goal = data[0];
                // Should have goal details
                expect(goal.target_value).toBeDefined();
                expect(goal.current_progress).toBeDefined();
                expect(typeof goal.is_completed).toBe('boolean');
                // Should have goal type info
                if (goal.goal_types) {
                    expect(goal.goal_types.display_name).toBeDefined();
                    expect(goal.goal_types.category).toBeDefined();
                }
                // Might or might not have progress records
                if (goal.goal_progress && goal.goal_progress.length > 0) {
                    expect(goal.goal_progress[0].value_achieved).toBeDefined();
                }
            }
        });
    });
    describe('Performance Validation', ()=>{
        it('should have indexes on foreign keys', async ()=>{
            // This would require a more complex query to check actual indexes
            // For now, we'll just verify that foreign key queries perform reasonably
            if (!supabase) {
                console.log('Skipping test - no database connection');
                return;
            }
            const start = Date.now();
            const { data, error } = await supabase.from('user_goals').select(`
          id,
          goal_types (display_name),
          goal_progress (count)
        `).limit(10);
            const duration = Date.now() - start;
            expect(error).toBeNull();
            expect(duration).toBeLessThan(5000) // Should complete within 5 seconds
            ;
        });
    });
    describe('Data Flow Validation', ()=>{
        it('complete user goal flow should be queryable', async ()=>{
            // Test the complete chain: user → user_goals → goal_types → goal_progress
            if (!supabase) {
                console.log('Skipping test - no database connection');
                return;
            }
            const { data, error } = await supabase.from('user_goals').select(`
          id,
          target_value,
          current_progress,
          is_completed,
          goal_types (
            display_name,
            category,
            unit
          ),
          goal_progress (
            id,
            value_achieved,
            contribution_amount
          )
        `).limit(1);
            expect(error).toBeNull();
            if (data && data.length > 0) {
                const goal = data[0];
                // Should have goal details
                expect(goal.target_value).toBeDefined();
                expect(goal.current_progress).toBeDefined();
                expect(typeof goal.is_completed).toBe('boolean');
                // Should have goal type info
                if (goal.goal_types) {
                    expect(goal.goal_types.display_name).toBeDefined();
                    expect(goal.goal_types.category).toBeDefined();
                }
                // Might or might not have progress records
                if (goal.goal_progress && goal.goal_progress.length > 0) {
                    expect(goal.goal_progress[0].value_achieved).toBeDefined();
                }
            }
        });
    });
});
async function createTestGoalData() {
    const supabase = (0, _supabasejs.createClient)(process.env.NEXT_PUBLIC_SUPABASE_URL, process.env.SUPABASE_SERVICE_ROLE_KEY);
    // This would create test data for development/testing
    // Implementation depends on your auth setup
    return {
        goalType: {
            name: 'test_weekly_distance',
            display_name: 'Test Weekly Distance',
            description: 'Test goal for weekly distance',
            category: 'distance',
            metric_type: 'total_distance',
            unit: 'km',
            calculation_method: 'Sum of weekly distances'
        }
    };
}
async function runSchemaHealthCheck() {
    const supabase = (0, _supabasejs.createClient)(process.env.NEXT_PUBLIC_SUPABASE_URL, process.env.SUPABASE_SERVICE_ROLE_KEY);
    const results = {
        tables: {},
        relationships: {},
        dataIntegrity: {},
        performance: {}
    };
    try {
        // Check table accessibility
        const tables = [
            'goal_types',
            'user_goals',
            'goal_progress',
            'user_onboarding'
        ];
        for (const table of tables){
            try {
                const { count, error } = await supabase.from(table).select('*', {
                    count: 'exact',
                    head: true
                });
                results.tables[table] = {
                    accessible: !error,
                    recordCount: count,
                    error: error?.message
                };
            } catch (e) {
                results.tables[table] = {
                    accessible: false,
                    error: e instanceof Error ? e.message : 'Unknown error'
                };
            }
        }
        console.log('Schema Health Check Results:', results);
        return results;
    } catch (error) {
        console.error('Schema health check failed:', error);
        return null;
    }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcdGlhbWFcXERlc2t0b3BcXENvZGluZ1xcZW5kdXJvcmV2YW1wXFxfX3Rlc3RzX19cXGRhdGFiYXNlXFxzY2hlbWEtdmFsaWRhdGlvbi50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUNsaWVudCwgU3VwYWJhc2VDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnXHJcblxyXG4vLyBTY2hlbWEgdmFsaWRhdGlvbiB0ZXN0cyB0byBlbnN1cmUgcmVsYXRpb25zaGlwcyB3b3JrIGNvcnJlY3RseVxyXG5kZXNjcmliZSgnRGF0YWJhc2UgU2NoZW1hIFZhbGlkYXRpb24nLCAoKSA9PiB7XHJcbiAgbGV0IHN1cGFiYXNlOiBTdXBhYmFzZUNsaWVudCB8IG51bGwgPSBudWxsXHJcbiAgXHJcbiAgYmVmb3JlQWxsKCgpID0+IHtcclxuICAgIC8vIENoZWNrIGlmIHdlIGhhdmUgcmVhbCBlbnZpcm9ubWVudCB2YXJpYWJsZXNcclxuICAgIGlmICghcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIHx8IFxyXG4gICAgICAgICFwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIHx8XHJcbiAgICAgICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMLmluY2x1ZGVzKCd0ZXN0LnN1cGFiYXNlLmNvJykpIHtcclxuICAgICAgY29uc29sZS5sb2coJ+KaoO+4jyAgU2tpcHBpbmcgc2NoZW1hIHZhbGlkYXRpb24gLSBubyByZWFsIGRhdGFiYXNlIGNyZWRlbnRpYWxzJylcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbiAgICBcclxuICAgIHN1cGFiYXNlID0gY3JlYXRlQ2xpZW50KFxyXG4gICAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwhLFxyXG4gICAgICBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIVxyXG4gICAgKVxyXG4gIH0pXHJcblxyXG4gIGRlc2NyaWJlKCdDb3JlIFRhYmxlIEV4aXN0ZW5jZScsICgpID0+IHtcclxuICAgIGNvbnN0IHJlcXVpcmVkVGFibGVzID0gW1xyXG4gICAgICAnYWN0aXZpdGllcycsXHJcbiAgICAgICdzdHJhdmFfdG9rZW5zJywgXHJcbiAgICAgICdzeW5jX3N0YXRlJyxcclxuICAgICAgJ2dvYWxfdHlwZXMnLFxyXG4gICAgICAndXNlcl9nb2FscycsXHJcbiAgICAgICdnb2FsX3Byb2dyZXNzJyxcclxuICAgICAgJ3VzZXJfb25ib2FyZGluZydcclxuICAgIF1cclxuXHJcbiAgICByZXF1aXJlZFRhYmxlcy5mb3JFYWNoKHRhYmxlID0+IHtcclxuICAgICAgaXQoYHNob3VsZCBoYXZlICR7dGFibGV9IHRhYmxlYCwgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGlmICghc3VwYWJhc2UpIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdTa2lwcGluZyB0ZXN0IC0gbm8gZGF0YWJhc2UgY29ubmVjdGlvbicpXHJcbiAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAgIC5mcm9tKHRhYmxlKVxyXG4gICAgICAgICAgLnNlbGVjdCgnKicpXHJcbiAgICAgICAgICAubGltaXQoMSlcclxuXHJcbiAgICAgICAgZXhwZWN0KGVycm9yKS50b0JlTnVsbCgpXHJcbiAgICAgIH0pXHJcbiAgICB9KVxyXG4gIH0pXHJcblxyXG4gIGRlc2NyaWJlKCdGb3JlaWduIEtleSBSZWxhdGlvbnNoaXBzJywgKCkgPT4ge1xyXG4gICAgaXQoJ3VzZXJfZ29hbHMgc2hvdWxkIHJlZmVyZW5jZSBnb2FsX3R5cGVzIGNvcnJlY3RseScsIGFzeW5jICgpID0+IHtcclxuICAgICAgaWYgKCFzdXBhYmFzZSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdTa2lwcGluZyB0ZXN0IC0gbm8gZGF0YWJhc2UgY29ubmVjdGlvbicpXHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIEdldCBhIGdvYWwgdHlwZVxyXG4gICAgICBjb25zdCB7IGRhdGE6IGdvYWxUeXBlcyB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAuZnJvbSgnZ29hbF90eXBlcycpXHJcbiAgICAgICAgLnNlbGVjdCgnaWQsIG5hbWUnKVxyXG4gICAgICAgIC5saW1pdCgxKVxyXG5cclxuICAgICAgaWYgKGdvYWxUeXBlcyAmJiBnb2FsVHlwZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIC8vIENoZWNrIGlmIGFueSB1c2VyX2dvYWxzIHJlZmVyZW5jZSB0aGlzIGdvYWxfdHlwZVxyXG4gICAgICAgIGNvbnN0IHsgZGF0YTogdXNlckdvYWxzLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAgIC5mcm9tKCd1c2VyX2dvYWxzJylcclxuICAgICAgICAgIC5zZWxlY3QoYFxyXG4gICAgICAgICAgICBpZCxcclxuICAgICAgICAgICAgZ29hbF90eXBlX2lkLFxyXG4gICAgICAgICAgICBnb2FsX3R5cGVzIChcclxuICAgICAgICAgICAgICBpZCxcclxuICAgICAgICAgICAgICBuYW1lLFxyXG4gICAgICAgICAgICAgIGRpc3BsYXlfbmFtZVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICBgKVxyXG4gICAgICAgICAgLmVxKCdnb2FsX3R5cGVfaWQnLCBnb2FsVHlwZXNbMF0uaWQpXHJcbiAgICAgICAgICAubGltaXQoMSlcclxuXHJcbiAgICAgICAgZXhwZWN0KGVycm9yKS50b0JlTnVsbCgpXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHVzZXJHb2FscyAmJiB1c2VyR29hbHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgZXhwZWN0KHVzZXJHb2Fsc1swXS5nb2FsX3R5cGVzKS50b0JlVHJ1dGh5KClcclxuICAgICAgICAgIGV4cGVjdCgodXNlckdvYWxzWzBdLmdvYWxfdHlwZXMgYXMgYW55KS5pZCkudG9CZShnb2FsVHlwZXNbMF0uaWQpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIGl0KCdnb2FsX3Byb2dyZXNzIHNob3VsZCByZWZlcmVuY2UgdXNlcl9nb2FscyBjb3JyZWN0bHknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGlmICghc3VwYWJhc2UpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnU2tpcHBpbmcgdGVzdCAtIG5vIGRhdGFiYXNlIGNvbm5lY3Rpb24nKVxyXG4gICAgICAgIHJldHVyblxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCB7IGRhdGE6IHVzZXJHb2FscyB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAuZnJvbSgndXNlcl9nb2FscycpXHJcbiAgICAgICAgLnNlbGVjdCgnaWQnKVxyXG4gICAgICAgIC5saW1pdCgxKVxyXG5cclxuICAgICAgaWYgKHVzZXJHb2FscyAmJiB1c2VyR29hbHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNvbnN0IHsgZGF0YTogcHJvZ3Jlc3MsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgICAgLmZyb20oJ2dvYWxfcHJvZ3Jlc3MnKVxyXG4gICAgICAgICAgLnNlbGVjdChgXHJcbiAgICAgICAgICAgIGlkLFxyXG4gICAgICAgICAgICB1c2VyX2dvYWxfaWQsXHJcbiAgICAgICAgICAgIHVzZXJfZ29hbHMgKFxyXG4gICAgICAgICAgICAgIGlkLFxyXG4gICAgICAgICAgICAgIGdvYWxfdHlwZV9pZFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICBgKVxyXG4gICAgICAgICAgLmVxKCd1c2VyX2dvYWxfaWQnLCB1c2VyR29hbHNbMF0uaWQpXHJcbiAgICAgICAgICAubGltaXQoMSlcclxuXHJcbiAgICAgICAgZXhwZWN0KGVycm9yKS50b0JlTnVsbCgpXHJcblxyXG4gICAgICAgIGlmIChwcm9ncmVzcyAmJiBwcm9ncmVzcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICBleHBlY3QocHJvZ3Jlc3NbMF0udXNlcl9nb2FscykudG9CZVRydXRoeSgpXHJcbiAgICAgICAgICBleHBlY3QoKHByb2dyZXNzWzBdLnVzZXJfZ29hbHMgYXMgYW55KS5pZCkudG9CZSh1c2VyR29hbHNbMF0uaWQpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIGl0KCd1c2VyX29uYm9hcmRpbmcgc2hvdWxkIGhhdmUgdW5pcXVlIHVzZXJfaWQgY29uc3RyYWludCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgaWYgKCFzdXBhYmFzZSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdTa2lwcGluZyB0ZXN0IC0gbm8gZGF0YWJhc2UgY29ubmVjdGlvbicpXHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHsgZGF0YTogb25ib2FyZGluZywgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgLmZyb20oJ3VzZXJfb25ib2FyZGluZycpXHJcbiAgICAgICAgLnNlbGVjdCgndXNlcl9pZCcpXHJcblxyXG4gICAgICBleHBlY3QoZXJyb3IpLnRvQmVOdWxsKClcclxuXHJcbiAgICAgIGlmIChvbmJvYXJkaW5nICYmIG9uYm9hcmRpbmcubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNvbnN0IHVzZXJJZHMgPSBvbmJvYXJkaW5nLm1hcCgobzogYW55KSA9PiBvLnVzZXJfaWQpXHJcbiAgICAgICAgY29uc3QgdW5pcXVlVXNlcklkcyA9IFsuLi5uZXcgU2V0KHVzZXJJZHMpXVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFNob3VsZCBoYXZlIHNhbWUgbGVuZ3RoIGlmIGFsbCB1c2VyX2lkcyBhcmUgdW5pcXVlXHJcbiAgICAgICAgZXhwZWN0KHVzZXJJZHMubGVuZ3RoKS50b0JlKHVuaXF1ZVVzZXJJZHMubGVuZ3RoKVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gIH0pXHJcblxyXG4gIGRlc2NyaWJlKCdEYXRhIEludGVncml0eSBDaGVja3MnLCAoKSA9PiB7XHJcbiAgICBpdCgnZ29hbF90eXBlcyBzaG91bGQgaGF2ZSB2YWxpZCBjYXRlZ29yaWVzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBpZiAoIXN1cGFiYXNlKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1NraXBwaW5nIHRlc3QgLSBubyBkYXRhYmFzZSBjb25uZWN0aW9uJylcclxuICAgICAgICByZXR1cm5cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgY29uc3QgdmFsaWRDYXRlZ29yaWVzID0gW1xyXG4gICAgICAgICdkaXN0YW5jZScsICdwYWNlJywgJ2ZyZXF1ZW5jeScsICdkdXJhdGlvbicsIFxyXG4gICAgICAgICdlbGV2YXRpb24nLCAnaGVhcnRfcmF0ZScsICdldmVudCdcclxuICAgICAgXVxyXG5cclxuICAgICAgY29uc3QgeyBkYXRhOiBnb2FsVHlwZXMsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCdnb2FsX3R5cGVzJylcclxuICAgICAgICAuc2VsZWN0KCdjYXRlZ29yeScpXHJcblxyXG4gICAgICBleHBlY3QoZXJyb3IpLnRvQmVOdWxsKClcclxuXHJcbiAgICAgIGlmIChnb2FsVHlwZXMpIHtcclxuICAgICAgICBnb2FsVHlwZXMuZm9yRWFjaCgoZ29hbFR5cGU6IGFueSkgPT4ge1xyXG4gICAgICAgICAgZXhwZWN0KHZhbGlkQ2F0ZWdvcmllcykudG9Db250YWluKGdvYWxUeXBlLmNhdGVnb3J5KVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgaXQoJ3VzZXJfZ29hbHMgc2hvdWxkIGhhdmUgdmFsaWQgdGltZV9wZXJpb2RzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBpZiAoIXN1cGFiYXNlKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1NraXBwaW5nIHRlc3QgLSBubyBkYXRhYmFzZSBjb25uZWN0aW9uJylcclxuICAgICAgICByZXR1cm5cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgY29uc3QgdmFsaWRUaW1lUGVyaW9kcyA9IFsnd2Vla2x5JywgJ21vbnRobHknLCAnc2luZ2xlX2FjdGl2aXR5JywgJ29uZ29pbmcnXVxyXG5cclxuICAgICAgY29uc3QgeyBkYXRhOiB1c2VyR29hbHMsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCd1c2VyX2dvYWxzJylcclxuICAgICAgICAuc2VsZWN0KCd0aW1lX3BlcmlvZCcpXHJcblxyXG4gICAgICBleHBlY3QoZXJyb3IpLnRvQmVOdWxsKClcclxuXHJcbiAgICAgIGlmICh1c2VyR29hbHMpIHtcclxuICAgICAgICB1c2VyR29hbHMuZm9yRWFjaCgoZ29hbDogYW55KSA9PiB7XHJcbiAgICAgICAgICBleHBlY3QodmFsaWRUaW1lUGVyaW9kcykudG9Db250YWluKGdvYWwudGltZV9wZXJpb2QpXHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICBpdCgnYWN0aXZpdGllcyBzaG91bGQgaGF2ZSB1c2VyX2lkIHRoYXQgbWF0Y2hlcyBVVUlEIGZvcm1hdCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgaWYgKCFzdXBhYmFzZSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdTa2lwcGluZyB0ZXN0IC0gbm8gZGF0YWJhc2UgY29ubmVjdGlvbicpXHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHsgZGF0YTogYWN0aXZpdGllcywgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgLmZyb20oJ2FjdGl2aXRpZXMnKVxyXG4gICAgICAgIC5zZWxlY3QoJ3VzZXJfaWQnKVxyXG4gICAgICAgIC5saW1pdCg1KVxyXG5cclxuICAgICAgZXhwZWN0KGVycm9yKS50b0JlTnVsbCgpXHJcblxyXG4gICAgICBpZiAoYWN0aXZpdGllcykge1xyXG4gICAgICAgIGNvbnN0IHV1aWRSZWdleCA9IC9eWzAtOWEtZl17OH0tWzAtOWEtZl17NH0tWzAtOWEtZl17NH0tWzAtOWEtZl17NH0tWzAtOWEtZl17MTJ9JC9pXHJcbiAgICAgICAgXHJcbiAgICAgICAgYWN0aXZpdGllcy5mb3JFYWNoKChhY3Rpdml0eTogYW55KSA9PiB7XHJcbiAgICAgICAgICBleHBlY3QoYWN0aXZpdHkudXNlcl9pZCkudG9NYXRjaCh1dWlkUmVnZXgpXHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgfSlcclxuICB9KVxyXG5cclxuICBkZXNjcmliZSgnRGFzaGJvYXJkIEdvYWxzIEZlYXR1cmUgUmVhZGluZXNzJywgKCkgPT4ge1xyXG4gICAgaXQoJ2dvYWxfZGF0YSBzaG91bGQgc3VwcG9ydCBkYXNoYm9hcmQgcHJlZmVyZW5jZXMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGlmICghc3VwYWJhc2UpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnU2tpcHBpbmcgdGVzdCAtIG5vIGRhdGFiYXNlIGNvbm5lY3Rpb24nKVxyXG4gICAgICAgIHJldHVyblxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCB7IGRhdGE6IHVzZXJHb2FscywgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgLmZyb20oJ3VzZXJfZ29hbHMnKVxyXG4gICAgICAgIC5zZWxlY3QoJ2dvYWxfZGF0YScpXHJcbiAgICAgICAgLm5vdCgnZ29hbF9kYXRhJywgJ2lzJywgbnVsbClcclxuICAgICAgICAubGltaXQoMSlcclxuXHJcbiAgICAgIGV4cGVjdChlcnJvcikudG9CZU51bGwoKVxyXG5cclxuICAgICAgaWYgKHVzZXJHb2FscyAmJiB1c2VyR29hbHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNvbnN0IGdvYWxEYXRhID0gdXNlckdvYWxzWzBdLmdvYWxfZGF0YVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFNob3VsZCBiZSB2YWxpZCBKU09OIGFuZCBzdXBwb3J0IG91ciBkYXNoYm9hcmQgZmllbGRzXHJcbiAgICAgICAgZXhwZWN0KHR5cGVvZiBnb2FsRGF0YSkudG9CZSgnb2JqZWN0JylcclxuICAgICAgICBcclxuICAgICAgICAvLyBUaGVzZSBmaWVsZHMgbWlnaHQgbm90IGV4aXN0IHlldCwgYnV0IHRoZSBzdHJ1Y3R1cmUgc2hvdWxkIHN1cHBvcnQgdGhlbVxyXG4gICAgICAgIGlmIChnb2FsRGF0YS5zaG93X29uX2Rhc2hib2FyZCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICBleHBlY3QodHlwZW9mIGdvYWxEYXRhLnNob3dfb25fZGFzaGJvYXJkKS50b0JlKCdib29sZWFuJylcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGdvYWxEYXRhLmRhc2hib2FyZF9wcmlvcml0eSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICBleHBlY3QodHlwZW9mIGdvYWxEYXRhLmRhc2hib2FyZF9wcmlvcml0eSkudG9CZSgnbnVtYmVyJylcclxuICAgICAgICAgIGV4cGVjdChnb2FsRGF0YS5kYXNoYm9hcmRfcHJpb3JpdHkpLnRvQmVHcmVhdGVyVGhhbigwKVxyXG4gICAgICAgICAgZXhwZWN0KGdvYWxEYXRhLmRhc2hib2FyZF9wcmlvcml0eSkudG9CZUxlc3NUaGFuT3JFcXVhbCgzKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICBpdCgndXNlcl9vbmJvYXJkaW5nIHNob3VsZCB0cmFjayBnb2FscyBjb21wbGV0aW9uJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBpZiAoIXN1cGFiYXNlKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1NraXBwaW5nIHRlc3QgLSBubyBkYXRhYmFzZSBjb25uZWN0aW9uJylcclxuICAgICAgICByZXR1cm5cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgY29uc3QgeyBkYXRhOiBvbmJvYXJkaW5nLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAuZnJvbSgndXNlcl9vbmJvYXJkaW5nJylcclxuICAgICAgICAuc2VsZWN0KCdnb2Fsc19jb21wbGV0ZWQsIGN1cnJlbnRfc3RlcCcpXHJcblxyXG4gICAgICBleHBlY3QoZXJyb3IpLnRvQmVOdWxsKClcclxuXHJcbiAgICAgIGlmIChvbmJvYXJkaW5nICYmIG9uYm9hcmRpbmcubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIG9uYm9hcmRpbmcuZm9yRWFjaCgocmVjb3JkOiBhbnkpID0+IHtcclxuICAgICAgICAgIC8vIGdvYWxzX2NvbXBsZXRlZCBzaG91bGQgYmUgYm9vbGVhblxyXG4gICAgICAgICAgZXhwZWN0KHR5cGVvZiByZWNvcmQuZ29hbHNfY29tcGxldGVkKS50b0JlKCdib29sZWFuJylcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gY3VycmVudF9zdGVwIHNob3VsZCBiZSB2YWxpZCB2YWx1ZVxyXG4gICAgICAgICAgZXhwZWN0KFsnZ29hbHMnLCAnc3RyYXZhJywgJ2NvbXBsZXRlJ10pLnRvQ29udGFpbihyZWNvcmQuY3VycmVudF9zdGVwKVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgaXQoJ2NvbXBsZXRlIHVzZXIgZ29hbCBmbG93IHNob3VsZCBiZSBxdWVyeWFibGUnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIFRlc3QgdGhlIGNvbXBsZXRlIGNoYWluOiB1c2VyIOKGkiB1c2VyX2dvYWxzIOKGkiBnb2FsX3R5cGVzIOKGkiBnb2FsX3Byb2dyZXNzXHJcbiAgICAgIGlmICghc3VwYWJhc2UpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnU2tpcHBpbmcgdGVzdCAtIG5vIGRhdGFiYXNlIGNvbm5lY3Rpb24nKVxyXG4gICAgICAgIHJldHVyblxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCd1c2VyX2dvYWxzJylcclxuICAgICAgICAuc2VsZWN0KGBcclxuICAgICAgICAgIGlkLFxyXG4gICAgICAgICAgdGFyZ2V0X3ZhbHVlLFxyXG4gICAgICAgICAgY3VycmVudF9wcm9ncmVzcyxcclxuICAgICAgICAgIGlzX2NvbXBsZXRlZCxcclxuICAgICAgICAgIGdvYWxfdHlwZXMgKFxyXG4gICAgICAgICAgICBkaXNwbGF5X25hbWUsXHJcbiAgICAgICAgICAgIGNhdGVnb3J5LFxyXG4gICAgICAgICAgICB1bml0XHJcbiAgICAgICAgICApLFxyXG4gICAgICAgICAgZ29hbF9wcm9ncmVzcyAoXHJcbiAgICAgICAgICAgIGlkLFxyXG4gICAgICAgICAgICB2YWx1ZV9hY2hpZXZlZCxcclxuICAgICAgICAgICAgY29udHJpYnV0aW9uX2Ftb3VudFxyXG4gICAgICAgICAgKVxyXG4gICAgICAgIGApXHJcbiAgICAgICAgLmxpbWl0KDEpXHJcblxyXG4gICAgICBleHBlY3QoZXJyb3IpLnRvQmVOdWxsKClcclxuXHJcbiAgICAgIGlmIChkYXRhICYmIGRhdGEubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNvbnN0IGdvYWwgPSBkYXRhWzBdXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gU2hvdWxkIGhhdmUgZ29hbCBkZXRhaWxzXHJcbiAgICAgICAgZXhwZWN0KGdvYWwudGFyZ2V0X3ZhbHVlKS50b0JlRGVmaW5lZCgpXHJcbiAgICAgICAgZXhwZWN0KGdvYWwuY3VycmVudF9wcm9ncmVzcykudG9CZURlZmluZWQoKVxyXG4gICAgICAgIGV4cGVjdCh0eXBlb2YgZ29hbC5pc19jb21wbGV0ZWQpLnRvQmUoJ2Jvb2xlYW4nKVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFNob3VsZCBoYXZlIGdvYWwgdHlwZSBpbmZvXHJcbiAgICAgICAgaWYgKGdvYWwuZ29hbF90eXBlcykge1xyXG4gICAgICAgICAgZXhwZWN0KChnb2FsLmdvYWxfdHlwZXMgYXMgYW55KS5kaXNwbGF5X25hbWUpLnRvQmVEZWZpbmVkKClcclxuICAgICAgICAgIGV4cGVjdCgoZ29hbC5nb2FsX3R5cGVzIGFzIGFueSkuY2F0ZWdvcnkpLnRvQmVEZWZpbmVkKClcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gTWlnaHQgb3IgbWlnaHQgbm90IGhhdmUgcHJvZ3Jlc3MgcmVjb3Jkc1xyXG4gICAgICAgIGlmIChnb2FsLmdvYWxfcHJvZ3Jlc3MgJiYgZ29hbC5nb2FsX3Byb2dyZXNzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIGV4cGVjdChnb2FsLmdvYWxfcHJvZ3Jlc3NbMF0udmFsdWVfYWNoaWV2ZWQpLnRvQmVEZWZpbmVkKClcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfSlcclxuXHJcbiAgZGVzY3JpYmUoJ1BlcmZvcm1hbmNlIFZhbGlkYXRpb24nLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGhhdmUgaW5kZXhlcyBvbiBmb3JlaWduIGtleXMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIFRoaXMgd291bGQgcmVxdWlyZSBhIG1vcmUgY29tcGxleCBxdWVyeSB0byBjaGVjayBhY3R1YWwgaW5kZXhlc1xyXG4gICAgICAvLyBGb3Igbm93LCB3ZSdsbCBqdXN0IHZlcmlmeSB0aGF0IGZvcmVpZ24ga2V5IHF1ZXJpZXMgcGVyZm9ybSByZWFzb25hYmx5XHJcbiAgICAgIFxyXG4gICAgICBpZiAoIXN1cGFiYXNlKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1NraXBwaW5nIHRlc3QgLSBubyBkYXRhYmFzZSBjb25uZWN0aW9uJylcclxuICAgICAgICByZXR1cm5cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgY29uc3Qgc3RhcnQgPSBEYXRlLm5vdygpXHJcbiAgICAgIFxyXG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCd1c2VyX2dvYWxzJylcclxuICAgICAgICAuc2VsZWN0KGBcclxuICAgICAgICAgIGlkLFxyXG4gICAgICAgICAgZ29hbF90eXBlcyAoZGlzcGxheV9uYW1lKSxcclxuICAgICAgICAgIGdvYWxfcHJvZ3Jlc3MgKGNvdW50KVxyXG4gICAgICAgIGApXHJcbiAgICAgICAgLmxpbWl0KDEwKVxyXG5cclxuICAgICAgY29uc3QgZHVyYXRpb24gPSBEYXRlLm5vdygpIC0gc3RhcnRcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChlcnJvcikudG9CZU51bGwoKVxyXG4gICAgICBleHBlY3QoZHVyYXRpb24pLnRvQmVMZXNzVGhhbig1MDAwKSAvLyBTaG91bGQgY29tcGxldGUgd2l0aGluIDUgc2Vjb25kc1xyXG4gICAgfSlcclxuICB9KVxyXG5cclxuICBkZXNjcmliZSgnRGF0YSBGbG93IFZhbGlkYXRpb24nLCAoKSA9PiB7XHJcbiAgICBpdCgnY29tcGxldGUgdXNlciBnb2FsIGZsb3cgc2hvdWxkIGJlIHF1ZXJ5YWJsZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8gVGVzdCB0aGUgY29tcGxldGUgY2hhaW46IHVzZXIg4oaSIHVzZXJfZ29hbHMg4oaSIGdvYWxfdHlwZXMg4oaSIGdvYWxfcHJvZ3Jlc3NcclxuICAgICAgaWYgKCFzdXBhYmFzZSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdTa2lwcGluZyB0ZXN0IC0gbm8gZGF0YWJhc2UgY29ubmVjdGlvbicpXHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgLmZyb20oJ3VzZXJfZ29hbHMnKVxyXG4gICAgICAgIC5zZWxlY3QoYFxyXG4gICAgICAgICAgaWQsXHJcbiAgICAgICAgICB0YXJnZXRfdmFsdWUsXHJcbiAgICAgICAgICBjdXJyZW50X3Byb2dyZXNzLFxyXG4gICAgICAgICAgaXNfY29tcGxldGVkLFxyXG4gICAgICAgICAgZ29hbF90eXBlcyAoXHJcbiAgICAgICAgICAgIGRpc3BsYXlfbmFtZSxcclxuICAgICAgICAgICAgY2F0ZWdvcnksXHJcbiAgICAgICAgICAgIHVuaXRcclxuICAgICAgICAgICksXHJcbiAgICAgICAgICBnb2FsX3Byb2dyZXNzIChcclxuICAgICAgICAgICAgaWQsXHJcbiAgICAgICAgICAgIHZhbHVlX2FjaGlldmVkLFxyXG4gICAgICAgICAgICBjb250cmlidXRpb25fYW1vdW50XHJcbiAgICAgICAgICApXHJcbiAgICAgICAgYClcclxuICAgICAgICAubGltaXQoMSlcclxuXHJcbiAgICAgIGV4cGVjdChlcnJvcikudG9CZU51bGwoKVxyXG5cclxuICAgICAgaWYgKGRhdGEgJiYgZGF0YS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY29uc3QgZ29hbCA9IGRhdGFbMF1cclxuICAgICAgICBcclxuICAgICAgICAvLyBTaG91bGQgaGF2ZSBnb2FsIGRldGFpbHNcclxuICAgICAgICBleHBlY3QoZ29hbC50YXJnZXRfdmFsdWUpLnRvQmVEZWZpbmVkKClcclxuICAgICAgICBleHBlY3QoZ29hbC5jdXJyZW50X3Byb2dyZXNzKS50b0JlRGVmaW5lZCgpXHJcbiAgICAgICAgZXhwZWN0KHR5cGVvZiBnb2FsLmlzX2NvbXBsZXRlZCkudG9CZSgnYm9vbGVhbicpXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gU2hvdWxkIGhhdmUgZ29hbCB0eXBlIGluZm9cclxuICAgICAgICBpZiAoZ29hbC5nb2FsX3R5cGVzKSB7XHJcbiAgICAgICAgICBleHBlY3QoKGdvYWwuZ29hbF90eXBlcyBhcyBhbnkpLmRpc3BsYXlfbmFtZSkudG9CZURlZmluZWQoKVxyXG4gICAgICAgICAgZXhwZWN0KChnb2FsLmdvYWxfdHlwZXMgYXMgYW55KS5jYXRlZ29yeSkudG9CZURlZmluZWQoKVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBNaWdodCBvciBtaWdodCBub3QgaGF2ZSBwcm9ncmVzcyByZWNvcmRzXHJcbiAgICAgICAgaWYgKGdvYWwuZ29hbF9wcm9ncmVzcyAmJiBnb2FsLmdvYWxfcHJvZ3Jlc3MubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgZXhwZWN0KGdvYWwuZ29hbF9wcm9ncmVzc1swXS52YWx1ZV9hY2hpZXZlZCkudG9CZURlZmluZWQoKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSlcclxuICB9KVxyXG59KVxyXG5cclxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGNyZWF0ZSB0ZXN0IGRhdGEgKHVzZWZ1bCBmb3IgZGV2ZWxvcG1lbnQpXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVUZXN0R29hbERhdGEoKSB7XHJcbiAgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoXHJcbiAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwhLFxyXG4gICAgcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSFcclxuICApXHJcblxyXG4gIC8vIFRoaXMgd291bGQgY3JlYXRlIHRlc3QgZGF0YSBmb3IgZGV2ZWxvcG1lbnQvdGVzdGluZ1xyXG4gIC8vIEltcGxlbWVudGF0aW9uIGRlcGVuZHMgb24geW91ciBhdXRoIHNldHVwXHJcbiAgXHJcbiAgcmV0dXJuIHtcclxuICAgIGdvYWxUeXBlOiB7XHJcbiAgICAgIG5hbWU6ICd0ZXN0X3dlZWtseV9kaXN0YW5jZScsXHJcbiAgICAgIGRpc3BsYXlfbmFtZTogJ1Rlc3QgV2Vla2x5IERpc3RhbmNlJyxcclxuICAgICAgZGVzY3JpcHRpb246ICdUZXN0IGdvYWwgZm9yIHdlZWtseSBkaXN0YW5jZScsXHJcbiAgICAgIGNhdGVnb3J5OiAnZGlzdGFuY2UnLFxyXG4gICAgICBtZXRyaWNfdHlwZTogJ3RvdGFsX2Rpc3RhbmNlJyxcclxuICAgICAgdW5pdDogJ2ttJyxcclxuICAgICAgY2FsY3VsYXRpb25fbWV0aG9kOiAnU3VtIG9mIHdlZWtseSBkaXN0YW5jZXMnXHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG4vLyBTY2hlbWEgaGVhbHRoIGNoZWNrIC0gcnVuIHRoaXMgcmVndWxhcmx5XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBydW5TY2hlbWFIZWFsdGhDaGVjaygpIHtcclxuICBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChcclxuICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCEsXHJcbiAgICBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIVxyXG4gIClcclxuXHJcbiAgY29uc3QgcmVzdWx0czoge1xyXG4gICAgdGFibGVzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xyXG4gICAgcmVsYXRpb25zaGlwczogUmVjb3JkPHN0cmluZywgYW55PjtcclxuICAgIGRhdGFJbnRlZ3JpdHk6IFJlY29yZDxzdHJpbmcsIGFueT47XHJcbiAgICBwZXJmb3JtYW5jZTogUmVjb3JkPHN0cmluZywgYW55PjtcclxuICB9ID0ge1xyXG4gICAgdGFibGVzOiB7fSxcclxuICAgIHJlbGF0aW9uc2hpcHM6IHt9LFxyXG4gICAgZGF0YUludGVncml0eToge30sXHJcbiAgICBwZXJmb3JtYW5jZToge31cclxuICB9XHJcblxyXG4gIHRyeSB7XHJcbiAgICAvLyBDaGVjayB0YWJsZSBhY2Nlc3NpYmlsaXR5XHJcbiAgICBjb25zdCB0YWJsZXMgPSBbJ2dvYWxfdHlwZXMnLCAndXNlcl9nb2FscycsICdnb2FsX3Byb2dyZXNzJywgJ3VzZXJfb25ib2FyZGluZyddXHJcbiAgICBcclxuICAgIGZvciAoY29uc3QgdGFibGUgb2YgdGFibGVzKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgeyBjb3VudCwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgICAuZnJvbSh0YWJsZSlcclxuICAgICAgICAgIC5zZWxlY3QoJyonLCB7IGNvdW50OiAnZXhhY3QnLCBoZWFkOiB0cnVlIH0pXHJcbiAgICAgICAgXHJcbiAgICAgICAgcmVzdWx0cy50YWJsZXNbdGFibGVdID0geyBcclxuICAgICAgICAgIGFjY2Vzc2libGU6ICFlcnJvciwgXHJcbiAgICAgICAgICByZWNvcmRDb3VudDogY291bnQsXHJcbiAgICAgICAgICBlcnJvcjogZXJyb3I/Lm1lc3NhZ2UgXHJcbiAgICAgICAgfVxyXG4gICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgcmVzdWx0cy50YWJsZXNbdGFibGVdID0geyBcclxuICAgICAgICAgIGFjY2Vzc2libGU6IGZhbHNlLCBcclxuICAgICAgICAgIGVycm9yOiBlIGluc3RhbmNlb2YgRXJyb3IgPyBlLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zb2xlLmxvZygnU2NoZW1hIEhlYWx0aCBDaGVjayBSZXN1bHRzOicsIHJlc3VsdHMpXHJcbiAgICByZXR1cm4gcmVzdWx0c1xyXG4gICAgXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1NjaGVtYSBoZWFsdGggY2hlY2sgZmFpbGVkOicsIGVycm9yKVxyXG4gICAgcmV0dXJuIG51bGxcclxuICB9XHJcbn0gIl0sIm5hbWVzIjpbImNyZWF0ZVRlc3RHb2FsRGF0YSIsInJ1blNjaGVtYUhlYWx0aENoZWNrIiwiZGVzY3JpYmUiLCJzdXBhYmFzZSIsImJlZm9yZUFsbCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIiwiaW5jbHVkZXMiLCJjb25zb2xlIiwibG9nIiwiY3JlYXRlQ2xpZW50IiwicmVxdWlyZWRUYWJsZXMiLCJmb3JFYWNoIiwidGFibGUiLCJpdCIsImRhdGEiLCJlcnJvciIsImZyb20iLCJzZWxlY3QiLCJsaW1pdCIsImV4cGVjdCIsInRvQmVOdWxsIiwiZ29hbFR5cGVzIiwibGVuZ3RoIiwidXNlckdvYWxzIiwiZXEiLCJpZCIsImdvYWxfdHlwZXMiLCJ0b0JlVHJ1dGh5IiwidG9CZSIsInByb2dyZXNzIiwidXNlcl9nb2FscyIsIm9uYm9hcmRpbmciLCJ1c2VySWRzIiwibWFwIiwibyIsInVzZXJfaWQiLCJ1bmlxdWVVc2VySWRzIiwiU2V0IiwidmFsaWRDYXRlZ29yaWVzIiwiZ29hbFR5cGUiLCJ0b0NvbnRhaW4iLCJjYXRlZ29yeSIsInZhbGlkVGltZVBlcmlvZHMiLCJnb2FsIiwidGltZV9wZXJpb2QiLCJhY3Rpdml0aWVzIiwidXVpZFJlZ2V4IiwiYWN0aXZpdHkiLCJ0b01hdGNoIiwibm90IiwiZ29hbERhdGEiLCJnb2FsX2RhdGEiLCJzaG93X29uX2Rhc2hib2FyZCIsInVuZGVmaW5lZCIsImRhc2hib2FyZF9wcmlvcml0eSIsInRvQmVHcmVhdGVyVGhhbiIsInRvQmVMZXNzVGhhbk9yRXF1YWwiLCJyZWNvcmQiLCJnb2Fsc19jb21wbGV0ZWQiLCJjdXJyZW50X3N0ZXAiLCJ0YXJnZXRfdmFsdWUiLCJ0b0JlRGVmaW5lZCIsImN1cnJlbnRfcHJvZ3Jlc3MiLCJpc19jb21wbGV0ZWQiLCJkaXNwbGF5X25hbWUiLCJnb2FsX3Byb2dyZXNzIiwidmFsdWVfYWNoaWV2ZWQiLCJzdGFydCIsIkRhdGUiLCJub3ciLCJkdXJhdGlvbiIsInRvQmVMZXNzVGhhbiIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsIm1ldHJpY190eXBlIiwidW5pdCIsImNhbGN1bGF0aW9uX21ldGhvZCIsInJlc3VsdHMiLCJ0YWJsZXMiLCJyZWxhdGlvbnNoaXBzIiwiZGF0YUludGVncml0eSIsInBlcmZvcm1hbmNlIiwiY291bnQiLCJoZWFkIiwiYWNjZXNzaWJsZSIsInJlY29yZENvdW50IiwibWVzc2FnZSIsImUiLCJFcnJvciJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7SUFrWnNCQSxrQkFBa0I7ZUFBbEJBOztJQXVCQUMsb0JBQW9CO2VBQXBCQTs7OzRCQXphdUI7QUFFN0MsaUVBQWlFO0FBQ2pFQyxTQUFTLDhCQUE4QjtJQUNy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